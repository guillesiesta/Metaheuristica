define("modules/clean/photos/thumb_loading/buffered_thumb_store",["require","exports","modules/clean/photos/thumb_loading/generic_thumb_store","modules/clean/web_timing_logger","modules/core/exception"],function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(function(){function e(e,t){var i=this;this.isTTI=!1,this.postTTISuccesses=[],this.postTTIErrors=[],this.postTTIRequests=[],this.wrapHandlers=function(e){return{onSuccess:function(t){i.isTTI?e.onSuccess(t):i.bufferCallbacks(i.postTTISuccesses,e,t)},onRequest:function(t){e.onRequest&&(i.isTTI?e.onRequest(t):i.bufferCallbacks(i.postTTIRequests,e,t))},onError:function(){e.onError&&(i.isTTI?e.onError():i.bufferErrorCallback(e))}}},this.innerStore=new r.GenericThumbStore(e,t),n.waitForTTI().then(function(){i.isTTI=!0,i.postTTIRequests.forEach(function(e){var t=e[0].onRequest;t&&t(e[1])}),i.postTTIErrors.forEach(function(e){return e.onError&&e.onError()}),i.postTTISuccesses.forEach(function(e){return e[0].onSuccess(e[1])}),i.postTTIRequests=[],i.postTTIErrors=[],i.postTTISuccesses=[]})}return e.prototype.get_thumb=function(e){return this.isTTI?this.innerStore.get_thumb(e):null},e.prototype.is_batching=function(){return this.innerStore.is_batching()},e.prototype.bind_url=function(e,t){var r=this.isTTI?t:this.wrapHandlers(t);return this.innerStore.bind_url(e,r)},e.prototype.bufferCallbacks=function(e,t,r){i.assert(!this.isTTI,"Should not buffer callback after TTI"),e.push([t,r])},e.prototype.bufferErrorCallback=function(e){i.assert(!this.isTTI,"Should not buffer error callback after TTI"),this.postTTIErrors.push(e)},e.prototype.unbind_url=function(e){this.innerStore.unbind_url(e)},e})();t.BufferedThumbStore=o}),define("modules/clean/react/browse/api",["require","exports","external/lodash","modules/clean/ajax","modules/clean/api_v2/client","modules/clean/react/browse/models","modules/core/i18n","modules/core/notify","modules/core/uri"],function(e,t,r,n,i,o,a,s,l){"use strict";function c(e){try{return JSON.parse(e)}catch(e){if(!(e instanceof SyntaxError))throw e}return null}function u(e){var t=e.sortLabel,r=e.sortIsAscending,i=e.path,o=e.userId,a=e.onSuccess,s=e.includeDeletedFiles,l=void 0!==s&&s,u=e.sortFoldersFirst,d=void 0===u||u,p=e.onError;return n.WebRequest({data:{sort_label:t,sort_is_ascending:r.toString(),show_deleted:l||"",sort_folders_first:d,include_file_info:"True",path2:i},url:"/browse",subject_user:o,success:function(e,t,r){var n=c(e);n&&a({path:i,data:n,xhr:r})},error:function(e,t,r){p&&p(e,t,r)}})}function d(e){var t=e.files,i=e.newPath,l=e.userId,c=e.onSuccess,u=e.checkFSWs,d=t.map(function(e){return e.fq_path});return d.includes(i)?(s.Notify.error(a._("You can’t copy a folder into itself.")),null):n.WebProgressRequest({url:"/cmd/copy",data:{files:d,to_path:i,fsw_request:u?"check":void 0},subject_user:l,progress_text:a._("Copying files..."),success:function(e){try{var t=r.isString(e)?JSON.parse(e):e;c({newFiles:t.new_browse_files?t.new_browse_files.map(o.File.fromServerObject):[],destinationPath:i,changesets:t.changesets,rollbackHints:t.rollback_hints,failureDetails:t.failure_details})}catch(e){}}})}function p(e){var t=e.files,i=e.userId,o=e.onSuccess,s=t.map(function(e){return e.fq_path});return n.WebProgressRequest({url:"/cmd/delete",data:{files:s},subject_user:i,progress_text:a._("Deleting files..."),success:function(e){try{var n=r.isString(e)?JSON.parse(e):e;o({fileDeltas:t.map(function(e){return{before:e,after:null}}),changesets:n.changesets,rollbackHints:n.rollback_hints})}catch(e){}}})}function h(e){var t=e.path,i=e.files,l=e.newPath,c=e.userId,u=e.onSuccess,d=e.allowOwnershipTransfer,p=e.checkFSWs;if(t===l)return s.Notify.error(a._("Those files already exist in that folder.")),null;var h=i.map(function(e){return e.fq_path});return h.includes(l)?(s.Notify.error(a._("You can’t move a folder into itself.")),null):n.WebProgressRequest({url:"/cmd/move",data:{files:h,to_path:l,allow_ownership_transfer:d,fsw_request:p?"check":void 0},subject_user:c,progress_text:a._("Moving files..."),skipNotifyError:!d,success:function(e){try{var n=r.isString(e)?JSON.parse(e):e;u({path:t,destinationPath:l,newFiles:n.new_browse_files?n.new_browse_files.map(o.File.fromServerObject):[],changesets:n.changesets,rollbackHints:n.rollback_hints,failureDetails:n.failure_details})}catch(e){}},error:function(t,r,n){s.Notify.error(n),e.onError&&e.onError(n)}})}function m(e){var t=e.file,r=e.newName,i=e.userId,o=e.onSuccess,a=e.onError;return n.WebRequest({url:new l.URI({path:"/cmd/rename"+t.fq_path}).toString(),subject_user:i,data:{to_path:r},success:function(e,r,n){var i=c(e);if(i){var s=t.merge(i.new_browse_files[0]);o({changesets:i.changesets,renamedFile:s,rollbackHints:i.rollback_hints})}else a&&a()},error:a})}function f(e){var t=e.files,r=e.userId,i=e.onSuccess;return n.WebProgressRequest({url:"/cmd/restore",data:{files:t.map(function(e){return e.fq_path})},subject_user:r,dataType:"json",progress_text:a._("Restoring…"),success:function(){i()}})}function g(e){var t=e.files,r=e.userId,i=e.onSuccess,o=e.progressText,s=void 0===o?a._("Deleting…"):o;return n.WebProgressRequest({url:"/cmd/purge",data:{files:t.map(function(e){return e.fq_path})},subject_user:r,dataType:"text",progress_text:s,success:function(e){var t=c(e);t&&"success"===t.status&&i()}})}function _(e){var t=e.userId,r=e.changesets,i=void 0===r?null:r,o=e.progressText,a=e.rollbackHints,s=void 0===a?{}:a,l=e.onSuccess;return n.WebProgressRequest({url:"/cmd/rollback",data:{ns_to_cs:JSON.stringify(i),rollback_hints:JSON.stringify(s)},subject_user:t,progress_text:o,success:function(){l()}})}function E(e){var t=e.pathName,r=e.folderName,i=e.userId,a=e.onSuccess,s=e.onError,u=e.checkFSWs;return n.WebProgressRequest({url:new l.URI({path:"/cmd/new"+t}).toString(),data:{to_path:r,folder:"yes",fsw_request:u?"check":void 0},subject_user:i,success:function(e){var t=c(e);if(t){var r=t.new_browse_files?o.File.fromServerObject(t.new_browse_files[0]):null;a({changesets:t.changesets,createdFolder:r,failureDetails:t.failure_details})}},error:function(){s()}})}function T(e){var t=e.pathName,r=e.title,i=e.documentType,a=e.userId,s=e.onSuccess,u=e.onError,d=(t+"/"+r+"."+i).replace("//","/");return n.WebRequest({url:new l.URI({path:"/cmd/create_cloud_doc"}).toString(),subject_user:a,data:{to_path:d,title:r},success:function(e){var t=c(e);if(t){s({changesets:null,createdFile:o.File.fromServerObject(t.new_browse_files[0])})}},error:function(e,t,r){u(r)},skipNotifyError:!0})}function S(e){var t=e.path,i=e.userId,o=e.namespaceToJournalIdMap,a=e.onSuccess,s=e.includeDeletedFiles,l=e.isNonUserRelativeContext,u="/"===t?"":t,d={fq_dir:u,ns_map:r.map(o,function(e,t){return t+"_"+e}).join(","),show_deleted:!!s,admin_console:!!l};return n.WebRequest({url:"/update/list_dir",subject_user:i,data:d,dataType:"text",success:function(e){var t=c(e);t&&a(t)}})}function b(e,t){return(new i.ApiV2Client).ns("folders").rpc("get_shared_subfolder_sizes",t,{subjectUserId:e})}function v(e,t){return(new i.ApiV2Client).ns("folders").rpc("get_subfolder_sizes_in_same_namespace",t,{subjectUserId:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.loadPath=u,t.copyFiles=d,t.deleteFiles=p,t.moveFiles=h,t.renameFile=m,t.restoreFiles=f,t.purgeFiles=g,t.rollbackChangeSets=_,t.createNewFolder=E,t.createCloudDoc=T,t.getChangesForDirectory=S,t.fetchSharedFolderSizes=b,t.fetchSameNamespaceFolderSizes=v}),define("modules/clean/react/browse/browse_location",["require","exports","tslib","external/classnames","external/immutable","spectrum/icon_arrow","spectrum/icon_content","spectrum/popover","external/react","modules/clean/react/icon/icon_helper","modules/clean/browse_interface","modules/clean/em_string","modules/clean/filepath","modules/clean/react/sprite","modules/clean/sharing/browse_exports","modules/clean/user_education/react/user_education_effect","modules/clean/user_education/user_education_client","modules/clean/viewer","modules/core/i18n"],function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,m,f,g,_,E){"use strict";function T(e,t){return t?m.GoldenGate.hasContentManagerCdm(e.id)?E._("Content"):E._("Team folders"):p.filename("",_.Viewer.get_root_name(e))}function S(e,t){return 20-(t?2.625:new d.Emstring(e).length)}function b(e,t,r){for(var n=T(e,r),i=t.split("/").filter(Boolean),o=[{path:"",folderName:n,icon:"folder_dropbox-small",alt:"work"===e.role?E._("Work"):E._("Personal")}],a=c.spectrum_folder_icon({size:c.ICON_SIZES.SMALL}),s=0;s<i.length;s++)t="/"+i.slice(0,s+1).join("/"),o.push({path:t,folderName:p.filename(t),icon:a,alt:E._("Folder")});if(o.length<3)return{dropdownCrumbs:[],inlineCrumbs:o,root:o[0]};for(var l=o[0]&&o[0].folderName||"",u=S(l,!1),h=o.map(function(e){return new d.Emstring(e.folderName||"").length}),m=1,f=h[o.length-1],s=o.length-2;s>=1&&(f+=1.64,f+=h[s],!(f>u));s--)m+=1;o.length===m+1&&(m+=1);var g=o.length-m;return{dropdownCrumbs:o.slice(0,g),inlineCrumbs:o.slice(g),root:o[0]}}Object.defineProperty(t,"__esModule",{value:!0});t.generateBreadcrumbData=b;var v=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props.path,n=this.props,i=n.user,o=n.isBrowseInContentManager,a=this.props,s=a.isDraggingInternalFiles,c=a.shouldHighlightDropTargets,u=a.setFileUploaderPath,d=b(i,t,o),h=d.dropdownCrumbs,m=d.inlineCrumbs,g=d.root,_=S(g&&g.folderName||"",h.length>0),v="page-header-text u-l-fl";return m.length>1||h.length>0?l.createElement("span",null,l.createElement("h1",{className:"ax-visually-hidden"},p.filename(t)),l.createElement("nav",{className:v,id:"browse-location","aria-label":E._("Folder hierarchy"),role:"navigation"},h.length>0&&l.createElement(N,{crumbs:h,currentPath:t,selectedFiles:this.props.selectedFiles,isDraggingInternalFiles:s,shouldHighlightDropTargets:c,setFileUploaderPath:u,setUrl:this.props.setUrl}),m.map(function(n,o){return l.createElement(w,r.__assign({},n,{key:encodeURI(n.path),user:i,isOnlyCrumb:0===o&&1===m.length&&0===h.length,index:o,isLastCrumb:o===m.length-1,maxWidth:_,currentPath:t,selectedFiles:e.props.selectedFiles,isDraggingInternalFiles:s,isHighlightedDropTarget:c,setFileUploaderPath:u,setUrl:e.props.setUrl}))}))):l.createElement("h1",{className:v},l.createElement(f.UserEducationEffect,{containerName:"BrowseLocation",name:"HomeTitle",useSpan:!0},T(i,o)))},t.defaultProps={path:"/",selectedFiles:i.OrderedMap(),isDraggingInternalFiles:!1,shouldHighlightDropTargets:!1,isBrowseInContentManager:!1,setFileUploaderPath:function(){}},t})(l.PureComponent);t.BrowseLocation=v;var I=function(){return l.createElement("span",null,l.createElement(h.Sprite,{group:"web",name:"chevron",className:"breadcrumb__spacer",alt:""}))},w=(function(e){function t(t){var r=e.call(this,t)||this;return r.onDragEnterBreadcrumb=function(e){e.preventDefault(),e.target!==r.lastEnteredElement&&(r.lastEnteredElement=e.target,r.dragEnterCount+=1,r.setState({isDraggedOver:!0}),r.props.isLastCrumb||r.props.setFileUploaderPath({path:r.props.path}))},r.onDragLeaveBreadcrumb=function(e){e.preventDefault(),r.lastEnteredElement=null,r.dragEnterCount-=1,r.dragEnterCount<1&&(r.dragEnterCount=0,r.state.isDraggedOver&&(r.props.setFileUploaderPath({path:r.props.currentPath}),r.setState({isDraggedOver:!1})))},r.onDropBreadcrumb=function(){r.setState({isDraggedOver:!1})},r.onDragOverBreadcrumb=function(e){e.preventDefault(),e.stopPropagation()},r.handleMouseEnter=function(){r.props.isDraggingInternalFiles&&r.setState({isDraggedOver:!0})},r.handleMouseLeave=function(){r.state.isDraggedOver&&r.setState({isDraggedOver:!1})},r.handleMouseUp=function(){r.state.isDraggedOver&&r.setState({isDraggedOver:!1})},r.navigateToFolder=function(e){var t=r.props.path;g.UEClient.sendEvent("BreadCrumbSegment","linkClicked",{path:t}),e.preventDefault(),r.props.setUrl({path:t})},r.eventHandlers={onDragEnter:r.onDragEnterBreadcrumb,onDragLeave:r.onDragLeaveBreadcrumb,onDrop:r.onDropBreadcrumb,onDragOver:r.onDragOverBreadcrumb,onMouseEnter:r.handleMouseEnter,onMouseLeave:r.handleMouseLeave,onMouseUp:r.handleMouseUp},r.state={isDraggedOver:!1},r}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.dragEnterCount=0,this.lastEnteredElement=null},t.prototype.render=function(){var e=this.props,t=e.user,i=e.path,a=e.index,s=e.isOnlyCrumb,c=e.maxWidth,p=e.isLastCrumb,h=e.isHighlightedDropTarget,m=s?this.props.folderName:d.Emstring.em_snippet(this.props.folderName,c),g={"breadcrumb-segment":!0,"breadcrumb-segment--is-drop-target":!p&&h,"breadcrumb-segment--file-dragged-over":!p&&this.state.isDraggedOver};return p?l.createElement("span",r.__assign({},this.eventHandlers),m):l.createElement("span",r.__assign({className:"breadcrumb-segment__wrapper"},this.eventHandlers),l.createElement(f.UserEducationEffect,{containerName:"BreadCrumbSegment",name:"link-"+a,useSpan:!0},l.createElement("a",{href:u.browse_uri_for_fq_path(t,i).toString(),onClick:this.navigateToFolder,className:n(g)},m)),l.createElement(o.IconArrow,{name:"right"}))},t.defaultProps={isOnlyCrumb:!1,isDraggingInternalFiles:!1,isHighlightedDropTarget:!1,selectedFiles:i.OrderedMap()},t})(l.Component),L=(function(e){function t(t){var r=e.call(this,t)||this;return r.onDragEnter=function(e){e.preventDefault(),e.target!==r.lastEnteredElement&&(r.lastEnteredElement=e.target,r.dragEnterCount+=1,r.setState({isDraggedOver:!0}),r.props.setFileUploaderPath({path:r.props.path}))},r.onDragLeave=function(e){e.preventDefault(),r.lastEnteredElement=null,r.dragEnterCount-=1,r.dragEnterCount<1&&(r.dragEnterCount=0,r.state.isDraggedOver&&(r.props.setFileUploaderPath({path:r.props.currentPath}),r.setState({isDraggedOver:!1})))},r.onDrop=function(e){r.setState({isDraggedOver:!1})},r.onDragOver=function(e){e.preventDefault(),e.stopPropagation()},r.handleMouseEnter=function(){r.props.isDraggingInternalFiles&&r.setState({isDraggedOver:!0})},r.handleMouseLeave=function(){r.state.isDraggedOver&&r.setState({isDraggedOver:!1})},r.handleMouseUp=function(){r.state.isDraggedOver&&r.setState({isDraggedOver:!1}),r.props.isDraggingInternalFiles&&!r.props.isLastCrumb&&r.props.closeFunc()},r.eventHandlers={onDragEnter:r.onDragEnter,onDragLeave:r.onDragLeave,onDrop:r.onDrop,onDragOver:r.onDragOver,onMouseEnter:r.handleMouseEnter,onMouseLeave:r.handleMouseLeave,onMouseUp:r.handleMouseUp},r.state={isDraggedOver:!1},r}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.dragEnterCount=0,this.lastEnteredElement=null},t.prototype.render=function(){var e=this.props,t=e.icon,i=e.alt,o=e.folderName,c={"breadcrumb-menu-item":!0,"breadcrumb-menu-item--is-drop-target":this.props.isHighlightedDropTarget,"breadcrumb-menu-item--file-dragged-over":this.state.isDraggedOver},u=l.createElement("span",r.__assign({title:o,className:"breadcrumb-menu-item-wrapper"},this.eventHandlers),l.createElement("span",{className:"breadcrumb-menu-item-icon"},l.createElement(a.IconContent,{name:t,alt:i})),l.createElement("span",{className:"breadcrumb-menu-item-text"},o));return l.createElement(s.PopoverContentItem,{value:this.props.path,className:n(c)},u)},t.defaultProps={isHighlightedDropTarget:!1,closeFunc:function(){},alt:"",isDraggingInternalFiles:!1,selectedFiles:i.OrderedMap()},t})(l.Component),N=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={menuVisible:!1},t.onDragEnter=function(e){e.preventDefault(),t.setState({menuVisible:!0})},t.onMouseEnter=function(e){t.props.isDraggingInternalFiles&&(e.preventDefault(),t.setState({menuVisible:!0}))},t.onCrumbSelected=function(e){t.props.setUrl({path:e})},t.onPopoverToggle=function(e){var r=e.isOpen;t.setState({menuVisible:r})},t.onClose=function(){t.onPopoverToggle({isOpen:!1})},t}return r.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props.crumbs.slice().reverse(),r=this.props,n=r.currentPath,i=r.shouldHighlightDropTargets,o=r.isDraggingInternalFiles,c=r.selectedFiles,u=r.setFileUploaderPath,d=E._("Show parent folders (descending)"),p=l.createElement(a.IconContent,{name:"folder_dropdown-small",alt:d,className:"breadcrumb-menu-icon"});return l.createElement("div",{onDragOver:this.onDragEnter,onMouseEnter:this.onMouseEnter},l.createElement(s.Popover,{onSelection:this.onCrumbSelected,onMenuToggle:this.onPopoverToggle,className:"breadcrumb-dropdown-container"},l.createElement(s.PopoverTrigger,null,l.createElement("button",{className:"u-unbutton breadcrumb-overflow-button u-l-fl"},p)),l.createElement(s.PopoverContent,{isRevealed:this.state.menuVisible},t.map(function(t){return l.createElement(L,{key:encodeURI(t.path),path:t.path,icon:t.icon,alt:t.alt,folderName:t.folderName,currentPath:n,isHighlightedDropTarget:i,isDraggingInternalFiles:o,selectedFiles:c,setFileUploaderPath:u,closeFunc:e.onClose})})),l.createElement(I,null)))},t.defaultProps={shouldHighlightDropTargets:!1,selectedFiles:i.OrderedMap(),isDraggingInternalFiles:!1},t})(l.Component)}),define("modules/clean/react/browse/util",["require","exports","modules/clean/react/browse/constants","modules/clean/react/browse/models","modules/clean/em_string","modules/clean/filepath","modules/core/i18n"],function(e,t,r,n,i,o,a){"use strict";function s(e){if(1===e.count()){var t=e.first(),r=o.filename(t.fq_path);return i.Emstring.em_snippet(r,13.5)}if(e.count()>1){var n=function(e){return e.isDeleted},s=e.some(n)&&!e.every(n),l=e.toArray().filter(function(e){return e.is_dir}),c=e.toArray().filter(function(e){return!e.is_dir});if(s)return a._("No available actions");var u=[];if(c.length){var d=a.ungettext("%(num_files)d file","%(num_files)d files",c.length).format({num_files:c.length});u.push(d)}if(l.length){var d=a.ungettext("%(num_folders)d folder","%(num_folders)d folders",l.length).format({num_folders:l.length});u.push(d)}return 2===u.length?a._("%(x)s and %(y)s",{comment:'\n            The whole string is a phrase like "2 files and 3 folders". \'x\' is\n            a string containing a phrase like "2 files" and \'y\' is a string\n            containing a phrase like "3 folders".\n          '}).format({x:u[0],y:u[1]}):u[0]}return""}function l(e,t){var r=e.count(),i=a._("You only have partial access");return r>0?1!==r||n.File.canViewFileMembers(e.first(),t)?a.ungettext("%(count)d item selected","%(count)d items selected",r).format({count:r}):n.File.isNoAccessSharedFolder(e.first())?a._("You don’t have access to this folder"):i:t&&!t.canViewContainingNSMembers?i:""}function c(e){return e.sync_setting?r.SyncSettingTranslations[e.sync_setting]:""}Object.defineProperty(t,"__esModule",{value:!0});t.describeFiles=s,t.getSelectedFilesText=l,t.getSyncSettingDescription=c}),define("modules/clean/react/file_viewer/async_controller",["require","exports"],function(e,t){"use strict";function r(){Array.from(document.querySelectorAll(o)).forEach(function(e){e.style.display&&e.setAttribute("data-preview-old-display",e.style.display),e.style.display="none"})}function n(){Array.from(document.querySelectorAll(o)).forEach(function(e){e.style.display=e.hasAttribute("data-preview-old-display")?e.getAttribute("data-preview-old-display"):""})}function i(t){var r=t.containerId,n=t.files,i=t.fileViewAction,o=t.fileViewOrigin,a=t.fileViewTarget,s=t.indexOfPreviewFile,l=t.onFileViewerDidMount,c=t.onFileViewerUnmount,u=t.shouldFocusComment,d=void 0!==u&&u,p=t.updateBrowserLocation,h=void 0===p||p,m=t.user;e(["modules/clean/react/file_viewer/controller"],function(e){e.open(n,s,m,r,{fileViewTarget:a,fileViewOrigin:o,fileViewAction:i,shouldFocusCommentInput:d,disableRouting:!h,onComponentDidMount:l,onComponentWillUnmount:c})})}Object.defineProperty(t,"__esModule",{value:!0});var o=[".maestro-chrome","#maestro-nav","#page-footer","#page-header","#page-sidebar","#browse-box",".growth-onboarding-progress-bar__container",".team-progress-bar-experience","#flash-upload-container"].join();t.hideElementsBehindFileViewer=r,t.showElementsBehindFileViewer=n,t.asyncOpenPreview=i}),define("modules/clean/react/files_view/constants",["require","exports","modules/clean/react/files_view/types","modules/core/i18n"],function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PAGE_HEADER_HEIGHT=96,t.DEFAULT_COLUMN_HEADER_HEIGHT=40,t.DEFAULT_ROW_HEIGHT=72,t.DEFAULT_VIEWPORT_TOP_OFFSET=t.DEFAULT_PAGE_HEADER_HEIGHT+t.DEFAULT_COLUMN_HEADER_HEIGHT,t.COMPACT_PAGE_HEADER_HEIGHT=76,t.COMPACT_COLUMN_HEADER_HEIGHT=48,t.COMPACT_VIEWPORT_TOP_OFFSET=t.COMPACT_PAGE_HEADER_HEIGHT+t.COMPACT_COLUMN_HEADER_HEIGHT,t.PINNED_TEAM_FOLDER_SECONDARY_HEADER_PADDING_TOP=12,t.CHECKBOX_CELL_FLEX="0 0 36px",t.LIST_VIEW_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 50%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 60%","0 0 40%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 100%"]},t.LIST_VIEW_SEARCH_MODE_COLUMN_FLEX={2:[t.CHECKBOX_CELL_FLEX,"1 1 66%","0 0 34%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 100%"]},t.GRID_VIEW_COLUMN_FLEX=[t.CHECKBOX_CELL_FLEX,"1 1"],t.LIST_VIEW_COLUMNS=[{sortField:r.SortField.FILENAME,label:n._("Name"),popoverTriggerLabel:n._("Name"),isLocked:!0},{sortField:r.SortField.MODIFIED,label:n._("Modified"),popoverTriggerLabel:n._("Modified")},{sortField:r.SortField.SHARED_WITH,label:n._("Members"),popoverTriggerLabel:n._("Members")},{sortField:r.SortField.CATEGORY,label:n._("Type"),popoverTriggerLabel:n._("Type")},{sortField:r.SortField.EXTENSION,label:n._("Extension"),popoverTriggerLabel:n._("Extension")},{sortField:r.SortField.SIZE,label:n._("Size"),popoverTriggerLabel:n._("Size")}],t.GRID_VIEW_COLUMNS=[{sortField:r.SortField.FILENAME,label:n._("Name"),popoverTriggerLabel:n._("Name")},{sortField:r.SortField.MODIFIED,label:n._("Modified"),popoverTriggerLabel:n._("Modified")},{sortField:r.SortField.CATEGORY,label:n._("Type"),popoverTriggerLabel:n._("Type")},{sortField:r.SortField.EXTENSION,label:n._("Extension"),popoverTriggerLabel:n._("Extension")},{sortField:r.SortField.SIZE,label:n._("Size"),popoverTriggerLabel:n._("Size")}],t.SEARCH_LIST_VIEW_COLUMNS=[{sortField:r.SortField.FILENAME,label:"",popoverTriggerLabel:"",isLocked:!0,isSortDisabled:!0},{sortField:r.SortField.MODIFIED,label:n._("Modified"),popoverTriggerLabel:n._("Modified"),isLocked:!0,isSortDisabled:!0}],t.SEARCH_LIST_VIEW_COLUMNS_DELETED=[{sortField:r.SortField.FILENAME,label:"",popoverTriggerLabel:"",isLocked:!0,isSortDisabled:!0},{sortField:r.SortField.MODIFIED,label:n._("Deleted"),popoverTriggerLabel:n._("Deleted"),isLocked:!0,isSortDisabled:!0}],t.SELECTABLE_LIST_KEY_SCOPE="FilesViewSelectableList",t.TILE_GRID_SCOPE="FilesViewTileGrid",t.SELECTABLE_LIST_LINKED_OUTSIDE_CLASSES=[".bubble-menu-item-wrapper",".browse-menu",".context-menu",".react-file-viewer",".db-modal"],t.FilesViewTileGridConstants={NUM_THRESHOLD_ROWS:10,SCROLL_DELTA_THRESHOLD:1},t.AllNewFolderCreationStates=[r.NewFolderCreationState.CREATE_FOLDER_INACTIVE,r.NewFolderCreationState.PENDING_INPUT,r.NewFolderCreationState.SAVING_INPUT],t.AllRenameStates=[r.RenameState.PENDING_INPUT,r.RenameState.SAVING_INPUT],t.AllViewTypes=[r.ViewType.Grid,r.ViewType.List],t.AllViewTypesExperiment=[r.ViewType.Grid,r.ViewType.List,r.ViewType.LargeGrid],t.AllDropTargetHighlightModes=[r.DropTargetHighlightMode.NONE,r.DropTargetHighlightMode.ALL_FOLDERS,r.DropTargetHighlightMode.NONSELECTED_FOLDERS,r.DropTargetHighlightMode.NONSELECTED_NONSHARED_FOLDERS,r.DropTargetHighlightMode.NONSELECTED_NONSHARED_NONTEAM_FOLDERS],t.AllSortFields=[r.SortField.FILENAME,r.SortField.MODIFIED,r.SortField.CATEGORY,r.SortField.EXTENSION,r.SortField.SIZE,r.SortField.SHARED_WITH,r.SortField.SYNC_SETTING],t.SortIsFilename=[r.SortField.FILENAME,r.SortField.CATEGORY,r.SortField.EXTENSION,r.SortField.SHARED_WITH,r.SortField.SYNC_SETTING],t.AllLoadingStates=[r.LoadingState.LOADED,r.LoadingState.LOADING_FIRST_PAGE,r.LoadingState.LOADING_REMAINING_PAGES],t.AllSortDirections=[r.SortDirection.ASCENDING,r.SortDirection.DESCENDING],t.ViewTypeThumbnailSizes=(i={},i[r.ViewType.Grid]=256,i[r.ViewType.LargeGrid]=512,i[r.ViewType.List]=32,i),t.ViewTypeGridSizes=(o={},o[r.ViewType.Grid]=160,o[r.ViewType.LargeGrid]=480,o[r.ViewType.List]=0,o);var i,o}),define("modules/clean/react/files_view/drag_and_drop",["require","exports","modules/clean/react/browse/models","modules/clean/react/no-jquery"],function(e,t,r,n){"use strict";function i(e,t,r,i,o,a,l){s.add(e,"dragenter",function(e){(t()||r())&&!n.closestElement(e.target,o)&&a()&&(l(null),i())})}function o(e){s.remove(e,"dragenter")}function a(e,t,n,i,o,a,s,l){if(t||n){if(e.is_dir&&!(i&&n)){if(o)return;var c=a.isCurrentPathWriteable()&&!r.File.isReadOnlySharedFolder(e);s(e),l({path:e.fq_path,hasPermissionToUploadToFolder:c})}else s(null),l()}}Object.defineProperty(t,"__esModule",{value:!0});var s=new n.ScopedEventHandlers(document);t.setupExternalDragHandler=i,t.cleanupExternalDragHandler=o,t.onFileDragEnterItem=a}),define("modules/clean/react/files_view/file_grouper",["require","exports","modules/core/i18n","modules/clean/datetime","modules/clean/react/browse/constants","modules/clean/react/files_view/types","modules/clean/react/browse/models"],function(e,t,r,n,i,o,a){"use strict";function s(e){return e instanceof a.File?a.File.getCategoryDescription(e,!0):i.ExtensionCategories.DOCUMENT}function l(e){return e instanceof a.File?e.is_dir?i.FileTypeCapitalizedCategoryTranslations.FOLDER:a.File.getExtension(e).toUpperCase():d}function c(e){return e instanceof a.File&&e.ts?1e3*e.ts:e instanceof a.Paper?Date.parse(e.last_modified_date):0}function u(e,t,i){var a=[],u=[],h=null;if(t===o.SortField.CATEGORY)e.forEach(function(e,t){if(e){var r=s(e);r!==h&&(a.push(r),u.push(t),h=r)}});else if(t===o.SortField.EXTENSION)e.forEach(function(e,t){if(e){var r=l(e);if(r!==h){var n=r;""===r&&(n=d),a.push(n),u.push(t),h=r}}});else if(t===o.SortField.MODIFIED)if(i===o.SortDirection.DESCENDING){var m=n.getTimeBands(Date.now());e.forEach(function(e,t){if(e){var n,i=c(e);n=i>=m.today?r._("Today"):i>=m.yesterday?r._("Yesterday"):i>=m.thisWeek?r._("This week"):i>=m.lastWeek?r._("Last week"):i>=m.thisMonth?r._("This month"):i>=m.lastMonth?r._("Last month"):i>=m.lastThreeMonths?r._("Three months ago"):r._("Older"),n!==h&&(a.push(n),u.push(t),h=n)}})}else e.forEach(function(e,t){if(e){var r;if(c(e)){var i=new Date(c(e)),o=i.getMonth(),s=i.getFullYear();r=n.month_with_year(o,s)}else r=p;r!==h&&(a.push(r),u.push(t),h=r)}});return{sectionLabels:a,sectionStartIndices:u}}Object.defineProperty(t,"__esModule",{value:!0});var d=r._("Extensionless",{comment:"Label for files without extensions like .txt or .png"}),p=r._("Missing dates",{comment:"label for group of files without dates marking when they are created or modified"});t.getSections=u}),define("modules/clean/react/files_view/file_jump",["require","exports","modules/clean/keycode","modules/core/dom"],function(e,t,r,n){"use strict";function i(e,t,i,s){var l=null!=e.which?e.which:e.keyCode,c=String.fromCharCode(l);l<r.KeyCode.SPACE||o.includes(c)||n.focus_in_input()||e.metaKey||e.altKey||e.altGraphKey||e.ctrlKey||l===r.KeyCode.SPACE&&!t()||(l===r.KeyCode.SPACE&&t()&&e.preventDefault(),i(c),null!=a&&clearTimeout(a),a=setTimeout(function(){s()},1e3))}Object.defineProperty(t,"__esModule",{value:!0});var o=["/","\\",":","?","*","<",">","|"],a=null;t.handleKeyPress=i}),define("modules/clean/react/files_view/file_list_empty_folder_table",["require","exports","tslib","external/react","spectrum/media_table","spectrum/table"],function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.props.onTTI&&this.props.onTTI()},t.prototype._renderTitle=function(){return n.createElement("h3",{className:"u-font-strong empty-folder-table-title"},this.props.title)},t.prototype._renderSubtitle=function(){var e=this.props,t=e.subtitle,r=e.subtitleLink,i=e.subtitleOnClick;return t&&r?n.createElement("a",{className:"empty-folder-table-subtitle empty-folder-table-link",href:r,onClick:i},t):t?n.createElement("span",{className:"empty-folder-table-subtitle"},t):void 0},t.prototype.render=function(){for(var e=[],t=0;t<this.props.numRowsAbove;t++)e.push(n.createElement(i.MediaRow,{key:-t-1}));for(var r=[],a=Math.max(this.props.totalRows-this.props.numRowsAbove-1,0),t=0;t<a;t++)r.push(n.createElement(i.MediaRow,{key:t+1}));return n.createElement(o.Table,{className:"empty-folder-table"},n.createElement(o.TableHead,null),n.createElement(o.TableBody,null,e,n.createElement(i.MediaRow,{key:0},n.createElement(i.MediaCell,{className:"empty-folder-table-cell",title:this._renderTitle(),subtitle:this._renderSubtitle()})),r))},t.defaultProps={numRowsAbove:2,totalRows:14},t})(n.PureComponent);t.EmptyFolderTable=a}),define("modules/clean/react/files_view/file_list_utils",["require","exports","modules/clean/filetypes","modules/clean/react/files_view/types","modules/clean/react/browse/models","modules/clean/sharing/browse_exports"],function(e,t,r,n,i,o){"use strict";function a(e){var t=e.file,o=e.isSelected,a=e.dropTargetHighlightMode;if(a===n.DropTargetHighlightMode.NONE)return!1;if(!t.is_dir)return!1;if(i.File.isReadOnlySharedFolder(t))return!1;if(t.isDeleted)return!1;switch(a){case n.DropTargetHighlightMode.ALL_FOLDERS:return!0;case n.DropTargetHighlightMode.NONSELECTED_FOLDERS:return!o;case n.DropTargetHighlightMode.NONSELECTED_NONSHARED_FOLDERS:return!o&&t.type!==r.FileTypes.SHARED_FOLDER;case n.DropTargetHighlightMode.NONSELECTED_NONSHARED_NONTEAM_FOLDERS:return!o&&![r.FileTypes.SHARED_FOLDER,r.FileTypes.TEAM_SHARED_FOLDER].includes(t.type)}return!1}function s(e){var t=e.context,n=e.file;e.user;return n.isDeleted||n.is_dir&&o.shouldUsePublicFolderSharing(t.config,n.fq_path)||i.File.isTeamMemberFolder(n)||!i.File.canViewFileMembers(n,t)||n.type===r.FileTypes.SANDBOX}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldFileBeHighlightedDropTarget=a,t.isSharingDisabledForFile=s}),define("modules/clean/react/files_view/keyboard_shortcuts",["require","exports","external/keymaster","external/react-dom","modules/clean/undo","modules/core/browser","modules/core/i18n","modules/core/notify","modules/clean/react/files_view/file_jump","modules/clean/react/no-jquery"],function(e,t,r,n,i,o,a,s,l,c){"use strict";function u(e){r.clearScope(e),r.setScope(E)}function d(e,t){return function(r){e(r)&&(r.preventDefault(),"function"==typeof t&&t(r))}}function p(e){return function(t){return!document.activeElement||document.activeElement===document.body||n.findDOMNode(e).contains(t.target)}}function h(e){u(e),T.remove(e,"keydown"),T.remove(e,"keyup")}function m(e){var t=e.getIsGlobalEvent,n=e.getIsItemEvent,l=e.getSelectedFiles,c=e.isFilesViewList,u=e.isCurrentPathWriteable,p=e.selectAllAction,h=e.deselectAllAction,m=e.onCopyToClipboard,f=e.onDelete,g=e.onPasteFromClipboard,_=e.onShowRename,T=e.onShowHelpMenu,S=e.scope;E=r.getScope(),E!==S&&r.setScope(S);var b=function(){var e=l(),t=e.some(function(e){return e.read_only});if(1===e.size)if(u()&&!t){var r=e.first();r.isDeleted?s.Notify.error(a._("Deleted files can’t be renamed.")):_(r)}else s.Notify.warning(a._("You don’t have permission to rename files in this folder."))},v=function(){var e=l();e.size&&f(e.toArray())},I=function(){i.performUndo()},w=function(){return document.getElementsByClassName("search-bar__text-input")[0].focus()};r("f2",S,d(n,b)),r("/",S,d(t,w)),r("shift+/",S,d(t,function(){return T(!!c)})),r("escape",S,d(t,h)),o.mac?(r("command+a",S,d(t,p)),r("command+c",S,d(n,m)),r("backspace",S,d(n,v)),r("command+v",S,d(t,g)),r("command+z",S,d(t,I))):(r("ctrl+a",S,d(t,p)),r("ctrl+c",S,d(n,m)),r("delete",S,d(n,v)),r("ctrl+v",S,d(t,g)),r("ctrl+z",S,d(t,I)))}function f(e){var t=e.getIsGlobalEvent,n=e.getIsItemEvent,i=e.getSelectedFiles,o=e.isCurrentPathWriteable,a=e.enableContextMenu,s=e.selectAllAction,l=e.deselectAllAction,u=e.onCopyToClipboard,p=e.onDelete,h=e.onNavigateToFileOrFolder,f=e.onNavigateToParentFolder,g=e.onPasteFromClipboard,_=e.onShowRename,E=e.onShowHelpMenu,T=e.openContextMenuAtPosition,S=e.scope;m({getIsGlobalEvent:t,
getIsItemEvent:n,getSelectedFiles:i,isFilesViewList:!0,isCurrentPathWriteable:o,selectAllAction:s,deselectAllAction:l,onCopyToClipboard:u,onDelete:p,onPasteFromClipboard:g,onShowRename:_,onShowHelpMenu:E,scope:S});var b=function(){var e=i();1===e.size&&h(e.first())},v=function(){var e=i(),t=e.first();1===e.size&&t.is_dir&&h(t)},I=function(e){if("function"==typeof T&&i().size){var t=c.closestElement(e.target,".browse-file-row--is-selected");if(t){T(t.offsetLeft+200,t.offsetTop+5,t)}}else T(10,10)};r("enter",S,d(n,b)),r("right",S,d(n,v)),r("left",S,d(t,f)),a()&&r("alt+a",S,d(t,I))}function g(e){var t=e.scope,n=e.getIsFileJumping,i=e.onAddFileJumpKeyCode,o=e.onResetFileJump,a=function(e){r.getScope()===t&&l.handleKeyPress(e,n,i,o)};T.add(t,"keypress",a)}function _(e){T.remove(e,"keypress")}Object.defineProperty(t,"__esModule",{value:!0}),t.FILES_VIEW_SHORTCUTS=[{windowsKey:"Enter",macKey:"return",desc:a._("Open file or folder")},{key:"/",desc:a._("Search")},{windowsKey:"Ctrl + a",macKey:"⌘ + a",desc:a._("Select all files")},{windowsKey:"Esc",macKey:"esc",desc:a._("Deselect all files")},{windowsKey:"Ctrl + c",macKey:"⌘ + c",desc:a._("Copy selected file(s)")},{windowsKey:"Ctrl + v",macKey:"⌘ + v",desc:a._("Paste selected file(s) into the current folder")},{key:"F2",desc:a._("Rename selected file")},{windowsKey:"Delete",macKey:"delete",desc:a._("Delete selected file(s)")},{windowsKey:"Ctrl + z",macKey:"⌘ + z",desc:a._("Undo recent move/copy/rename/delete")},{key:"?",desc:a._("Show keyboard shortcuts")}],t.FILES_VIEW_LIST_SHORTCUTS=[{key:"↑",desc:a._("Select previous file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:"↓",desc:a._("Select next file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:"←",desc:a._("Go up a folder")},{key:"→",desc:a._("Open folder")}].concat(t.FILES_VIEW_SHORTCUTS),t.FILES_VIEW_TILE_GRID_SHORTCUTS=[{key:"↑",desc:a._("Select file in previous row (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:"↓",desc:a._("Select file in next row (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:"←",desc:a._("Select previous file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:"→",desc:a._("Select next file (hold shift to select range)",{comment:"Shift refers to the shift key"})}].concat(t.FILES_VIEW_SHORTCUTS);var E="",T=new c.ScopedEventHandlers(document);t.generateGetIsGlobalEvent=p,t.resetFilesViewKeyboardShortcuts=h,t.setupFilesViewKeyboardShortcuts=m,t.setupFilesViewListKeyboardShortcuts=f,t.setupFileJumpKeyboardShortcuts=g,t.resetFileJumpKeyboardShortcuts=_}),define("modules/clean/react/files_view/name_input",["require","exports","tslib","external/classnames","external/react","modules/clean/keycode","modules/clean/react/files_view/types"],function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){},l=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setInputRef=function(e){t.inputRef=e},t.handleDragStart=function(e){e.stopPropagation()},t.handleSubmit=function(e){e.preventDefault(),t.submitIfChanged(a.NameInputActionSource.SUBMIT)},t.handleKeyDown=function(e){e.keyCode===o.KeyCode.ESC?(e.preventDefault(),t.props.onCancel({source:a.NameInputActionSource.ESC})):e.keyCode===o.KeyCode.ENTER&&t.handleSubmit(e)},t.handleBlur=function(e){t.submitIfChanged(a.NameInputActionSource.BLUR)},t.handleClick=function(e){e.preventDefault(),t.props.onClick(e)},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.inputRef.focus(),window.requestAnimationFrame(function(){var t=e.inputRef.value,r=e.props.isDir?t.length:t.lastIndexOf(".");r<0&&(r=t.length),e.inputRef.setSelectionRange(0,r)})},t.prototype.submitIfChanged=function(e){var t=this.inputRef.value.trim();t===this.props.defaultValue?this.props.onCancel({source:e}):this.props.onSubmit(t)},t.prototype.render=function(){return i.createElement("form",{className:"u-pad-right-xs",onSubmit:this.handleSubmit},i.createElement("input",{ref:this.setInputRef,defaultValue:this.props.defaultValue,className:n("c-input",this.props.className),onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onDragStart:this.handleDragStart,"aria-label":this.props.label,onClick:this.handleClick}))},t.defaultProps={className:"",onCancel:s,onClick:s,onSubmit:s,idDir:null},t})(i.PureComponent);t.NameInput=l}),define("modules/clean/react/files_view/overflow_menu",["require","exports","tslib","external/react","spectrum/overflow_button","spectrum/popover","modules/core/i18n","external/lodash"],function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l;(function(e){e[e.Normal=0]="Normal",e[e.Small=1]="Small"})(l=t.OverflowMenuSize||(t.OverflowMenuSize={}));var c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.preventDefaultAndStopPropagation=function(e){e.preventDefault(),e.stopPropagation()},t.handleSelection=function(e){e.performAction()},t}return r.__extends(t,e),t.prototype.renderOverflowButton=function(){return n.createElement(i.OverflowButton,{"aria-label":a._("More actions"),className:"browse-overflow-menu-trigger-button",tagName:"span",size:this.props.size===l.Small?"small":"default",variant:this.props.showBorders?"secondary":"borderless"})},t.prototype._getMenuItems=function(){var e=this.props.actionItemsGroups;return s.reduce(e,function(e,t,r){var i=t.map(function(e){return n.createElement(o.PopoverContentItem,{className:e.className,key:e.label,value:e,disabled:e.disabled},e.label)});return r?e.concat([n.createElement(o.PopoverItemGroupSeparator,{key:r})],i):i.slice()},[])},t.prototype.render=function(){var e=this.props.attachment,t=this._getMenuItems();return n.createElement("div",{className:"browse-overflow-menu",onClick:this.preventDefaultAndStopPropagation,onDoubleClick:this.preventDefaultAndStopPropagation},n.createElement(o.Popover,{onSelection:this.handleSelection,closeOnSelection:!0},n.createElement(o.PopoverTrigger,{className:"browse-overflow-menu-trigger"},this.renderOverflowButton()),n.createElement(o.PopoverContent,{attachment:e,className:"browse-overflow-menu-content"},t)))},t.defaultProps={attachment:"right"},t})(n.PureComponent);t.FilesViewOverflowMenu=c}),define("modules/clean/react/files_view/star",["require","exports","external/react","modules/core/exception"],function(e,t,r,n){"use strict";function i(t){var i,o,a=t.item,s=t.user,l=t.className,c=t.onStarClick,u=t.isReadOnly,d=t.isTabbing,p=e("modules/clean/react/starred/browse_exports"),h=p.Star,m=p.HOME_RESOURCE_ID_TYPE,f=p.StarredSource;return a.file_id?(i=a.file_id,o=m.ENCODED_FILE_OBJ_ID):a.pad_id?(i=a.pad_id,o=m.PAPER_DOCUMENT_ID):a.folder_id?(i=a.folder_id,o=m.PAPER_FOLDER_ID):(n.assert(!!a.fq_path,"Starrable item is not valid. It requires file_id, pad_id, folder_id or fq_path."),i=a.fq_path,o=m.FQ_PATH),r.createElement("div",{className:l},r.createElement(h,{id:i,key:"star",idType:o,user:s,onStarClick:c,source:f.BROWSE,isReadOnly:u,isTabbing:d}))}Object.defineProperty(t,"__esModule",{value:!0}),t.StarContainer=i}),define("modules/clean/react/files_view/tile_grid",["require","exports","tslib","external/classnames","external/immutable","external/react","spectrum/button","modules/clean/em_string","modules/clean/filepath","modules/clean/react/files_view/file_grouper","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/browse/models","modules/clean/react/files_view/overflow_menu","modules/clean/react/files_view/tile_label_input","modules/clean/react/files_view/types","modules/clean/react/files_view/constants","modules/clean/react/files_view/drag_and_drop","modules/clean/react/files_view/util","modules/clean/react/files_view/star","modules/clean/react/maestro/tile_grid","modules/clean/react/title_bubble","modules/core/i18n","modules/core/uri","modules/clean/browse_interface"],function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,m,f,g,_,E,T,S,b,v,I){"use strict";function w(e,t){var r;return e.thumbnail_url_tmpl&&(r=v.URI.parse(e.thumbnail_url_tmpl),r=r.removeQuery("size").removeQuery("size_mode"),r=r.updateQuery({size:t+"x"+t,size_mode:"2"}).toString()),r}Object.defineProperty(t,"__esModule",{value:!0}),t.getThumbnailUrlForItem=w;var L=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onStarClickCallback=function(e){var r=t.props,n=r.onStarClick,i=r.item,o=i;n&&n(o,e)},t}return r.__extends(t,e),t.prototype.render=function(){var e,t=this.props,r=t.fileRename,n=t.arePostTTIModulesLoaded,i=t.user,a=t.item,c=t.inSelectMode,u=t.createRenameCancelHandler,p=t.createRenameSubmitHandler,f=t.expShowPaperStars,g=t.expUseFqPathForStars,_=a instanceof d.File,v=a,I=a;if(e=_?l.filename(v.fq_path):I.title,_&&r&&l.paths_are_equal(r.file.fq_path,v.fq_path)){if(r.state===m.RenameState.PENDING_INPUT)return o.createElement(h.TileLabelInput,{defaultValue:e,label:e,onCancel:u(v),onSubmit:p(v)});if(r.state===m.RenameState.SAVING_INPUT)return o.createElement(T.TileItemLabelText,{className:"tile-label__text--saving",label:b._("Renaming…")})}var w=s.Emstring.em_snippet(e,14,.5),L=n&&!c&&!d.File.isNoAccessSharedFolder(v),N=o.createElement(T.TileItemLabelText,{key:"label",label:w});e!==w&&(N=o.createElement(S.TitleBubble,{content:e,position:S.TitleBubble.POSITIONS.BOTTOM,className:"tile-label__title-bubble",key:"tooltip"},N));var y=_?this.onStarClickCallback:void 0,D=_&&g?{fq_path:v.fq_path}:a,C=_||f?o.createElement(E.StarContainer,{item:D,user:i,className:"tile-star",key:"tileStar",onStarClick:y}):null;return o.createElement("span",null,[N,L&&!r&&C])},t})(o.PureComponent);t.TileLabel=L;var N=(function(t){function s(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={inSelectMode:!1,sectionLabels:i.List(),sectionStartIndices:i.List(),selectedIds:i.Set(),totalNumItems:0},e.handleFileViewerUnmount=function(){e.tileGrid&&e.tileGrid.getAndUpdateTileLayout();var t=e.props.selectedFiles.first();t&&e.props.onFocusFile(t.fq_path)},e.createRenameCancelHandler=function(t){return function(){e.props.onRenameCancel(t)}},e.createRenameSubmitHandler=function(t){return function(r){e.props.onRenameSubmit(t,r)}},e.setTileGridRef=function(t){e.tileGrid=t},e.getTileItem=function(t,n){var i,s=e.props,c=s.activeDropTarget,u=s.isCreateFolderUIActive,p=s.isPhotosPage,h=s.items,m=s.selection,g=s.user,_=s.viewType,E=e.state.inSelectMode;if(u){if(0===t)return e.getCreateFolderTile();t-=1}var T=h.get(t);if(!T){var S="Placeholder "+t;return{altText:S,id:S,isViewOnly:!0,isDraggable:!1,isSelectable:!1}}var v=T instanceof d.File,L=T,N=T,y=e.createViewFileHandler(L),D=e.createToggleSelectHandler(L),C=y,F=!1,O=!1;v&&(i=e.renderTileOverflowMenu(L,n)),E&&v&&(F=m.selected.last()===L.fq_path,O=m.selected.has(L.fq_path),C=D,v&&(i=o.createElement(a.Button,{className:"tile__action-button--view-file",variant:"secondary",size:"small","aria-label":b._("View File"),onClick:y})));var P=p?void 0:e.renderLabelElement(T),A=v?l.filename(L.fq_path):N.title,R=v?w(L,f.ViewTypeThumbnailSizes[_]):void 0,M=T===c,x=v?I.href_for_file(g,L):void 0,H={file:L,paper:T instanceof d.Paper?N:void 0,id:v?L.sjid.toString():N.pad_id,labelNode:P,altText:A,thumbnailUrl:R,actionNode:i,onTileAction:C,isDraggable:!1,isFocused:F,isSelectable:v,handleToggleSelect:D,checkboxAriaText:b._("Select tile"),href:x};return p||(H=r.__assign({},H,{isDraggable:!0,onDragEnter:e.createDragEnterHandler(L,O,M),onDragStart:e.createDragStartHandler(L,O,D)})),H},e}return r.__extends(s,t),s.prototype.componentWillMount=function(){this.setState({inSelectMode:this.props.selectedFiles.count()>0}),this.setTotalNumItems(this.props),this.setTileItemsSections(this.props),this.setSelectedTiles(this.props)},s.prototype.componentDidMount=function(){this.setupExternalDragHandler(),this.setupKeyboardShortcuts()},s.prototype.componentWillUnmount=function(){this.props.isPhotosPage||u.resetFileJumpKeyboardShortcuts(f.TILE_GRID_SCOPE),u.resetFilesViewKeyboardShortcuts(f.TILE_GRID_SCOPE),g.cleanupExternalDragHandler(f.TILE_GRID_SCOPE)},s.prototype.componentWillReceiveProps=function(e){e.items===this.props.items&&e.createNewFolderState===this.props.createNewFolderState||this.setTotalNumItems(e),e.selectedFiles!==this.props.selectedFiles&&(this.setSelectedTiles(e),this.setState({inSelectMode:e.selectedFiles.count()>0})),e.activeSortField===this.props.activeSortField&&e.activeSortDirection===this.props.activeSortDirection&&e.sections===this.props.sections&&e.items===this.props.items||this.setTileItemsSections(e)},s.prototype.componentDidUpdate=function(e){(e.createNewFolderState===m.NewFolderCreationState.PENDING_INPUT&&this.props.createNewFolderState===m.NewFolderCreationState.SAVING_INPUT||e.fileRename!==this.props.fileRename||e.items!==this.props.items)&&this.tileGrid.forceUpdate()},s.prototype.setTotalNumItems=function(e){var t=Math.max(e.items.size,e.totalNumItems);e.isCreateFolderUIActive&&(t+=1),this.setState({totalNumItems:t})},s.prototype.setTileItemsSections=function(e){var t;t=e.sections?e.sections:e.activeSortField?c.getSections(e.items,e.activeSortField,e.activeSortDirection):{sectionLabels:[],sectionStartIndices:[]},this.setState({sectionLabels:i.List(t.sectionLabels),sectionStartIndices:i.List(t.sectionStartIndices)})},s.prototype.createToggleSelectHandler=function(e){var t=this,r=e.fq_path;return function(e){e.preventDefault(),e.stopPropagation();var n=t.props.selection;n=n.selected.has(r)?n.update("selected",function(e){return e.delete(r)}):n.update("selected",function(e){return e.add(r)}).set("anchor",r),t.props.onSelectionChange(n)}},s.prototype.renderTileOverflowMenu=function(t,r){var n=this.props,i=n.getOverflowMenuActions,a=n.arePostTTIModulesLoaded,s=0===r?"left":"right";if(a){var l=e("modules/clean/react/files_view/overflow_menu_with_star").OverflowMenuWithStar;return o.createElement(l,{file:t,getOverflowMenuActions:i,attachment:s,size:p.OverflowMenuSize.Small,showBorders:!0})}return null},s.prototype.renderLabelElement=function(e){var t=this.state.inSelectMode,n=this.props,i=n.user,a=n.fileRename,s=n.arePostTTIModulesLoaded,l=n.onStarClick,c=n.expShowPaperStars,u=n.expUseFqPathForStars,d={user:i,fileRename:a,arePostTTIModulesLoaded:s,onStarClick:l,expShowPaperStars:c,expUseFqPathForStars:u};return o.createElement(L,r.__assign({},d,{item:e,inSelectMode:t,createRenameCancelHandler:this.createRenameCancelHandler,createRenameSubmitHandler:this.createRenameSubmitHandler}))},s.prototype.createViewFileHandler=function(e){var t=this;return function(r){if(e instanceof d.File){if("click"===r.type&&!_.shouldHandleClick(r))return;r.preventDefault(),r.stopPropagation(),t.props.onNavigateToFileOrFolder(e,t.handleFileViewerUnmount)}else e instanceof d.Paper&&t.props.onOpenPaper(r,e)}},s.prototype.setSelectedTiles=function(e){var t=i.Set().withMutations(function(t){e.selectedFiles.forEach(function(e){t.add(e.sjid.toString())})});this.setState({selectedIds:t})},s.prototype.setupExternalDragHandler=function(){var e=this,t=function(){return!!e.props.isDraggingInternalFiles},r=function(){return!!e.props.isDraggingExternalFiles},n=function(){return e.props.activeDropTarget};g.setupExternalDragHandler(f.TILE_GRID_SCOPE,t,r,this.props.onSetFileUploaderPath,".tile",n,this.props.onSetDropTarget)},s.prototype.setupKeyboardShortcuts=function(){var e=this,t=this.props,r=t.onDelete,n=t.onShowRename,i=t.deselectAll,o=t.getIsCurrentPathWriteable,a=t.getIsFileJumping,s=t.onAddFileJumpKeyCode,l=t.onResetFileJump,c=t.onCopyToClipboard,d=t.onPasteFromClipboard,p=t.selectAll,h=u.generateGetIsGlobalEvent(this),m=h,g=function(){return e.props.selectedFiles};this.props.isPhotosPage||u.setupFileJumpKeyboardShortcuts({scope:f.TILE_GRID_SCOPE,getIsFileJumping:a,onAddFileJumpKeyCode:s,onResetFileJump:l}),u.setupFilesViewKeyboardShortcuts({getIsGlobalEvent:h,getIsItemEvent:m,getSelectedFiles:g,isFilesViewList:!1,isCurrentPathWriteable:o,selectAllAction:p,deselectAllAction:i,onCopyToClipboard:c,onDelete:r,onPasteFromClipboard:d,onShowRename:n,scope:f.TILE_GRID_SCOPE,onShowHelpMenu:function(){return e.props.onOpenKeyboardShortcutModal()}})},s.prototype.createDragEnterHandler=function(e,t,r){var n=this;return function(i){n.props.onDragEnter(i,e,t,r)}},s.prototype.createDragStartHandler=function(e,t,r){var n=this;return function(i){t?n.props.onDragStart(i):(r(i),n.props.onDragStart(i,[e]))}},s.prototype.getCreateFolderTile=function(){var e=this.props,t=e.createNewFolderState,r=e.onNewFolderCancel,n=e.onNewFolderSubmit,i=b._("New folder"),a=o.createElement("div",null);return t===m.NewFolderCreationState.PENDING_INPUT?(i=b._("Folder name"),a=o.createElement(h.TileLabelInput,{label:i,onCancel:r,onSubmit:n})):t===m.NewFolderCreationState.SAVING_INPUT&&(i=b._("Creating new folder…"),a=o.createElement(T.TileItemLabelText,{className:"tile-label__text--saving",label:i})),{altText:i,id:"New folder tile",isDraggable:!1,isSelectable:!1,labelNode:a}},s.prototype.getTileGridRef=function(){return this.tileGrid},s.prototype.render=function(){var e=this.props,t=e.enableMaxHeightGrouping,r=e.viewType,i=n({"file-tile-grid-container":!0,"file-tile-grid-container--show-checkboxes":this.state.inSelectMode});return o.createElement("div",null,o.createElement(T.InfiniteTileGrid,{key:"tileGrid",ref:this.setTileGridRef,totalNumItems:this.state.totalNumItems,containerClass:i,rowClass:"file-tile-row",enableMaxHeightGrouping:t,delayRenderFullTile:!this.props.isCreateFolderUIActive,logTileLoading:!0,numThresholdRows:f.FilesViewTileGridConstants.NUM_THRESHOLD_ROWS,scrollDeltaThreshold:f.FilesViewTileGridConstants.SCROLL_DELTA_THRESHOLD,sectionStartIndices:this.state.sectionStartIndices,sectionLabels:this.state.sectionLabels,showLabels:!this.props.isPhotosPage,contentOffset:136,getTileItem:this.getTileItem,selectedIds:this.state.selectedIds,handleTTI:this.props.onTTI,thumbStore:this.props.thumbStore,onRangeInView:this.props.onRangeInView,tilesPerRow:this.props.tilesPerRow,onTilesPerRowChange:this.props.onTilesPerRowChange,dropTargetHighlightMode:this.props.dropTargetHighlightMode,activeDropTarget:this.props.activeDropTarget,maxTileWidth:f.ViewTypeGridSizes[r],tileHeight:f.ViewTypeGridSizes[r]}))},s.defaultProps={enableMaxHeightGrouping:!1},s})(o.PureComponent);t.FilesViewTileGrid=N}),define("modules/clean/react/files_view/tile_label_input",["require","exports","external/classnames","external/react","modules/clean/react/files_view/name_input"],function(e,t,r,n,i){"use strict";function o(e){var t=r("tile-label-input",e.className),o=e.defaultValue||"",a=function(e){e.stopPropagation(),e.preventDefault()};return n.createElement(i.NameInput,{className:t,defaultValue:o,label:e.label,onCancel:e.onCancel,onClick:a,onSubmit:e.onSubmit})}Object.defineProperty(t,"__esModule",{value:!0}),t.TileLabelInput=o}),define("modules/clean/react/files_view/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.ESC="ESC",e.SUBMIT="SUBMIT",e.BLUR="BLUR"})(t.NameInputActionSource||(t.NameInputActionSource={}));(function(e){e.CREATE_FOLDER_INACTIVE="CREATE_FOLDER_INACTIVE",e.PENDING_INPUT="PENDING_INPUT",e.SAVING_INPUT="SAVING_INPUT"})(t.NewFolderCreationState||(t.NewFolderCreationState={}));(function(e){e.PENDING_INPUT="pending-input",e.SAVING_INPUT="saving-input"})(t.RenameState||(t.RenameState={}));(function(e){e.LOADED="LOADED",e.LOADING_FIRST_PAGE="LOADING_FIRST_PAGE",e.LOADING_REMAINING_PAGES="LOADING_REMAINING_PAGES"})(t.LoadingState||(t.LoadingState={}));(function(e){e.FILENAME="FILENAME",e.MODIFIED="MODIFIED",e.CATEGORY="CATEGORY",e.EXTENSION="EXTENSION",e.SIZE="SIZE",e.SHARED_WITH="SHARED_WITH",e.SYNC_SETTING="SYNC_SETTING"})(t.SortField||(t.SortField={}));(function(e){e.FILENAME="FILES_BY_NAME",e.MODIFIED="FILES_BY_MODIFIED",e.CATEGORY="FILES_BY_CATEGORY",e.EXTENSION="FILES_BY_NAME",e.SIZE="FILES_BY_SIZE",e.SHARED_WITH="FILES_BY_NAME",e.SYNC_SETTING="FILES_BY_SYNC_SETTING"})(t.SortLabel||(t.SortLabel={}));(function(e){e.ASCENDING="ASCENDING",e.DESCENDING="DESCENDING"})(t.SortDirection||(t.SortDirection={}));(function(e){e.Grid="GRID_VIEW",e.List="LIST_VIEW",e.LargeGrid="LARGE_GRID_VIEW"})(t.ViewType||(t.ViewType={}));(function(e){e.LOADING="LOADING",e.COMPLETE="COMPLETE",e.NO_ACCESS="NO_ACCESS",e.ERROR="ERROR"})(t.FetchFolderSizeState||(t.FetchFolderSizeState={}));(function(e){e.NONE="NONE",e.ALL_FOLDERS="ALL_FOLDERS",e.NONSELECTED_FOLDERS="NONSELECTED_FOLDERS",e.NONSELECTED_NONSHARED_FOLDERS="NONSELECTED_NONSHARED_FOLDERS",e.NONSELECTED_NONSHARED_NONTEAM_FOLDERS="NONSELECTED_NONSHARED_NONTEAM_FOLDERS"})(t.DropTargetHighlightMode||(t.DropTargetHighlightMode={}))}),define("modules/clean/react/files_view/util",["require","exports"],function(e,t){"use strict";function r(e){return 0===e.button&&!e.altKey&&!e.ctrlKey&&!e.metaKey}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldHandleClick=r}),define("modules/clean/react/maestro/checkbox",["require","exports","tslib","external/react","external/classnames"],function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o;(function(e){e[e.Checked=0]="Checked",e[e.PartiallyChecked=1]="PartiallyChecked",e[e.Unchecked=2]="Unchecked"})(o||(o={})),t.CheckboxState=o;var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this.props.checkboxState,t=i({"checkbox-button":!0,"partial-checked":e===o.PartiallyChecked,checked:e===o.Checked});return n.createElement("button",{role:"checkbox","aria-checked":e===o.Checked,"aria-label":this.props.ariaLabel,className:t,onClick:this.props.onClick,onMouseDown:this.props.onMouseDown})},t})(n.PureComponent);t.Checkbox=a}),define("modules/clean/react/maestro/tile_element",["require","exports","tslib","external/classnames","external/react","modules/clean/search/paper_formatting_utils","modules/clean/keycode","modules/clean/react/maestro/checkbox","modules/clean/react/maestro/tile_grid_logger","modules/clean/react/icon/file_folder_icon","modules/clean/user_education/react/user_education_effect"],function(e,t,r,n,i,o,a,s,l,c,u){"use strict";function d(e){var t=e.leftOffset,r=e.tileHeight,n=e.tileWidth,o=e.thumbNode,a=e.labelNode,s={left:t,height:r,width:n,pointerEvents:"none"},l={height:n,width:n};return i.createElement("div",{className:"tile",style:s},i.createElement("div",{className:"tile__thumb-container",style:l},o||i.createElement("div",{className:"tile__preview--placeholder"})),a)}Object.defineProperty(t,"__esModule",{value:!0});var p=function(){return null};t.TilePlaceholder=d;var h=(function(e){function t(n){var i=e.call(this,n)||this;return i.animationRequestIds=[],i.handleThumbnailError=function(){var e=i.props,t=e.onThumbnailError,r=e.tileIndex;i.setState({thumbLoaded:!1}),t&&t(r)},i.focusTile=function(){if(!i.state.isFocused){var e=i.refs.tileThumbContainer;e&&e.focus()}},i.logTileInteractive=function(){var e=!!i.props.thumbnailUrl,t=i.state.thumbLoaded;if(i.props.onThumbnailLoad){var r=window.requestAnimationFrame(function(){var r=window.requestAnimationFrame(function(){i.props.onThumbnailLoad(i.props.tileIndex,e,t)});i.animationRequestIds.push(r)});i.animationRequestIds.push(r)}},i.toggleSelect=function(e){e.preventDefault(),e.stopPropagation(),i.props.handleToggleSelect(e)},i.handleThumbKeyPress=function(e){var t=e.keyCode;t!==a.KeyCode.SPACE&&t!==a.KeyCode.ENTER||(e.preventDefault(),i.props.onTileAction(e))},i.onBlur=function(e){i.setState({isFocused:!1})},i.onFocus=function(e){i.setState({isFocused:!0})},i.state=r.__assign({thumbLoaded:t.isThumbLoaded(n)},i.calcPaperTitleState(n)),i}return r.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.delayRenderFullTile?this.renderCompleteTileTimeout=setTimeout(function(){e.renderCompleteTileTimeout=0,e.fetchThumbnail()},100):this.fetchThumbnail(),this.logTileInteractive()},t.prototype.componentDidUpdate=function(e,t){!e.isFocused&&this.props.isFocused&&this.focusTile()},t.prototype.componentWillReceiveProps=function(e){if(e.thumbnailUrl!==this.props.thumbnailUrl&&(this.unbindThumbnailIfNeeded(),this.setState({thumbLoaded:t.isThumbLoaded(e)}),this.fetchThumbnail()),t.getPaperTitle(this.props)!==t.getPaperTitle(e)){var r=this.calcPaperTitleState(e);this.setState(r)}},t.getPaperTitle=function(e){return e.paper?e.paper.title:null},t.prototype.calcPaperTitleState=function(e){return e.paper?{paperTitleParts:o.getPaperDocTitleParts(e.paper,"brws-file-name-grid-icon","brws-file-name-grid-icon-emoji",!0)}:{}},t.prototype.componentWillUnmount=function(){this.unbindThumbnailIfNeeded(),this.renderCompleteTileTimeout&&clearTimeout(this.renderCompleteTileTimeout),this.animationRequestIds.forEach(function(e){window.cancelAnimationFrame(e)}),this.animationRequestIds=[]},t.prototype.fetchThumbnail=function(){var e=this,t=this.props,r=t.thumbnailUrl,n=t.thumbStore;if(r){var i=Date.now();this.thumbRequestId=n.bind_url(r,{onSuccess:function(){e.setState({thumbLoaded:!0}),l.InfiniteTileGridLogger.logThumbRTT(Date.now()-i)},onError:function(){e.handleThumbnailError()}})}},t.prototype.unbindThumbnailIfNeeded=function(){var e=this.props.thumbStore;this.state.thumbLoaded&&this.thumbRequestId&&e.unbind_url(this.thumbRequestId),this.setState({thumbLoaded:!1})},t.isThumbLoaded=function(e){var t=e.thumbStore,r=e.thumbnailUrl;return!(!r||!t.get_thumb(r))},t.prototype.renderCheckbox=function(){var e=this.props.isSelected?s.CheckboxState.Checked:s.CheckboxState.Unchecked,t=i.createElement(s.Checkbox,{ariaLabel:this.props.checkboxAriaText,checkboxState:e,onClick:this.toggleSelect});return 0===this.props.tileIndex&&(t=i.createElement(u.UserEducationEffect,{containerName:"FileItemRow",name:"FirstFileSelectCheckbox"},t)),i.createElement("div",{key:"tile-select-checkbox",className:"tile-select-checkbox"},t)},t.prototype.renderActionNode=function(){return i.createElement("div",{key:"tile-action-node",className:"tile__action-button"},this.props.actionNode)},t.prototype.renderThumbnail=function(){var e=this.props,t=e.thumbnailUrl,r=e.thumbStore,n=e.altText,o=e.width;if(this.state.thumbLoaded){var a=r.get_thumb(t);if(a)return i.createElement("img",{alt:n,className:"tile__preview tile__preview--thumb",draggable:!1,src:a,style:{maxHeight:o,maxWidth:o},onError:this.handleThumbnailError})}return this.renderFileIcon()},t.prototype.renderFileIcon=function(){var e=this.props,t=e.file;return e.paper?this.state.paperTitleParts.icon:t?i.createElement(c.FileOrFolderIcon,{className:"tile__preview tile__preview--icon",file:t,variant:"large",showPreview:!1,width:"100%",height:"100%"}):i.createElement("div",{className:"tile__preview--placeholder"})},t.prototype.render=function(){var e=null;this.props.labelNode&&(e=i.createElement("div",{className:"tile-label"},this.props.labelNode));var t=this.props.width+this.props.labelHeight;if(this.props.isViewOnly)return i.createElement(d,{leftOffset:this.props.leftOffset,tileHeight:t,tileWidth:this.props.width,thumbNode:this.renderThumbnail(),labelNode:e});var o={left:this.props.leftOffset,height:t,width:this.props.width},a={height:this.props.width,width:this.props.width},s={className:n("tile",{"tile--is-selected":this.props.isSelected,"tile--focused-in":this.state.isFocused,"tile--is-dragover":this.props.isActiveDropTarget,"tile--is-droppable":this.props.isAvailableDropTarget&&!this.props.isActiveDropTarget}),style:o,draggable:this.props.isDraggable,href:this.props.href,onBlur:this.onBlur,onClick:this.props.onTileAction,onDragEnter:this.props.onDragEnter,onDragStart:this.props.onDragStart,onFocus:this.onFocus},l=i.createElement("div",{ref:"tileThumbContainer",className:"tile__thumb-container",style:a,tabIndex:0,onKeyDown:this.handleThumbKeyPress},this.renderThumbnail());return i.createElement("a",r.__assign({},s),l,this.props.isSelectable&&this.renderCheckbox(),this.renderActionNode(),e)},t.defaultProps={checkboxAriaText:"",delayRenderFullTile:!0,handleToggleSelect:p,isFocused:!1,isSelected:!1,isViewOnly:!1,onDragEnter:p,onDragStart:p,onTileAction:p},t})(i.PureComponent);t.TileElement=h}),define("modules/clean/react/maestro/tile_grid",["require","exports","tslib","external/react","external/react-dom","external/classnames","modules/clean/js_client_stopwatch","spectrum/culled_list","modules/clean/react/maestro/tile_element","modules/clean/react/maestro/tile_grid_logger","modules/clean/react/files_view/file_list_utils"],function(e,t,r,n,i,o,a,s,l,c,u){"use strict";function d(e){var t=null;return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(!t||t.length!==r.length||!t.every(function(e,t){return e===r[t]}))return t=r,e.apply(void 0,r)}}function p(e){var t=e.className,r=e.label;return t=o("tile-label__text",t),n.createElement("div",{className:t},r)}Object.defineProperty(t,"__esModule",{value:!0});t.memoizeCallback=d,t.TileItemLabelText=p;var h=(function(e){function t(t){var r=e.call(this,t)||this;if(r.ttiReported=!1,r.itemRangeByRow=[],r.scrollTileIntoView=function(e,t){var n=r.props.contentOffset||0,i=document.documentElement.scrollTop||document.body.scrollTop,o=Math.floor(t/r.props.tilesPerRow),a=e-n,s=r.getRowHeight(),l=o*s,c=l+s;i<=l&&c<=a+i||(l<i?window.scrollTo(0,l):window.scrollTo(0,c-a))},r.updateOnResize=function(){window.requestAnimationFrame(function(){r.getAndUpdateTileLayout()})},r.handleTTI=function(){r.ttiReported=!0;var e=r.props.handleTTI;e&&e()},r.setLastViewedPage=function(e){var t=document.documentElement.scrollTop||document.body.scrollTop,n=Math.round(t/e);if(r.tileLoadLogger.pruneTrackedPages(),r.tileLoadLogger.logCompletedPages(),!r.tileLoadLogger.pagesCompletedLogging.has(n)&&!r.tileLoadLogger.pagesToLog.has(n))if(n!==r.tileLoadLogger.lastViewedPage){if(r.tileLoadLogger.lastViewedPage=n,r.tileLoadLogger.pageChangeTime=r.tileLoadLogger.getTimeNow(),!r.tileLoadLogger.startTimeByPage.get(n)){var i=r.tileLoadLogger.getTimeNow(),o=r.tileLoadLogger.startTimeByPage.set(n,i);r.tileLoadLogger.startTimeByPage=o}}else{var i=r.tileLoadLogger.getTimeNow();if(i-r.tileLoadLogger.pageChangeTime>1e3){var a=r.tileLoadLogger.pagesToLog.add(n);r.tileLoadLogger.pagesToLog=a}}},r.logTileError=function(e){r.tileLoadLogger&&r.tileLoadLogger.recordTileError(e),r.props.logTileLoading&&c.InfiniteTileGridLogger.logThumbLoadError()},r.logTileLoaded=function(e,t,n){r.tileLoadLogger&&r.tileLoadLogger.recordTileLoaded(e,t,n)},r.renderTileElement=function(e,t,i){if(e<0||e>r.props.totalNumItems)return null;var o=r.props.getTileItem(e,i);if(!o)return n.createElement(l.TilePlaceholder,{leftOffset:t,tileHeight:r.state.tileWidth,tileWidth:r.state.tileWidth});var a=r.ttiReported&&r.props.delayRenderFullTile,s=o.isSelectable&&!!r.props.selectedIds&&r.props.selectedIds.has(o.id),c=o.file&&u.shouldFileBeHighlightedDropTarget({file:o.file,isSelected:s,dropTargetHighlightMode:r.props.dropTargetHighlightMode}),d=c&&o.file===r.props.activeDropTarget;return n.createElement(l.TileElement,{file:o.file,paper:o.paper,key:o.id,onTileAction:o.onTileAction,width:r.state.tileWidth,leftOffset:t,tileIndex:e,labelHeight:o.labelNode?r.props.labelHeight:0,delayRenderFullTile:a,actionNode:o.actionNode,thumbnailUrl:o.thumbnailUrl,labelNode:o.labelNode,altText:o.altText,onThumbnailError:r.props.logTileLoading?r.logTileError:void 0,onThumbnailLoad:r.props.logTileLoading?r.logTileLoaded:void 0,isDraggable:o.isDraggable,onDragEnter:o.onDragEnter,onDragStart:o.onDragStart,isFocused:o.isFocused,isSelectable:o.isSelectable,isSelected:s,isViewOnly:o.isViewOnly,isActiveDropTarget:d,isAvailableDropTarget:c,handleToggleSelect:o.handleToggleSelect,checkboxAriaText:o.checkboxAriaText,thumbStore:r.props.thumbStore,scrollTileIntoView:r.scrollTileIntoView,href:o.href})},r.renderRow=function(e,t,i){var o=r.rowHeights?r.rowHeights[t]:r.getRowHeight();if(!e)return n.createElement(s.CulledItem,{className:r.props.rowClass,height:o,key:t,tagName:"li",topOffset:i});if(!Array.isArray(e))return n.createElement(s.CulledItem,{className:r.props.rowClass,height:o,key:t,
tagName:"li",topOffset:i},e);for(var a=e,l=a[0],c=a[1],u=r.state.tileWidth+r.props.tilePadding,d=[],p=4,h=l;h<c;h++)d.push(r.renderTileElement(h,p,d.length)),p+=u;return n.createElement(s.CulledItem,{className:r.props.rowClass,height:o,key:t,tagName:"li",topOffset:i},d)},r.handleRangeInView=d(function(e,t){var n=r.props.onRangeInView;if(n){var i=r.translateRowRangeToItemRange(e,t);n(i[0],i[1])}}),r.props.sectionLabels||r.props.sectionStartIndices){if(!r.props.sectionLabels||!r.props.sectionStartIndices)throw new Error("Included only one of `sectionLabels` or `sectionStartIndices`.");if(r.props.sectionLabels.count()!==r.props.sectionStartIndices.count())throw new Error("sectionLabels and sectionStartIndices must be of same length.")}return r.state={tileWidth:r.props.maxTileWidth},a.JSStopwatch.create_stopwatch_if_not_exist("infinite_tile_grid_logging"),r}return r.__extends(t,e),t.prototype.updateLayout=function(){var e=this;this.animationFrameRequestId=window.requestAnimationFrame(function(){var t=e.getAndUpdateTileLayout();e.props.logTileLoading&&!e.tileLoadLogger&&e.setupTileLogging(e.getRowHeight(),t.tilesPerRow)})},t.prototype.componentDidMount=function(){window.addEventListener("resize",this.updateOnResize),this.updateLayout()},t.prototype.componentWillReceiveProps=function(e){this.tileLoadLogger&&this.tileLoadLogger.updateNumTiles(e.totalNumItems),this.props.maxTileWidth!==e.maxTileWidth&&this.updateLayout()},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.updateOnResize),this.animationFrameRequestId&&window.cancelAnimationFrame(this.animationFrameRequestId),this.tileLoadLogger&&(clearInterval(this.logTrackingInterval),delete this.tileLoadLogger)},t.prototype.getRowHeight=function(){var e=this.state.tileWidth+this.props.tilePadding;return this.props.showLabels&&(e+=this.props.labelHeight+4),e},t.prototype.getPageHeight=function(){var e=document.documentElement.clientHeight||window.outerHeight,t=this.props.contentOffset||0,r=e-t,n=this.getRowHeight(),i=n*Math.ceil(r/n);return Math.max(i,n)},t.prototype.getAndUpdateTileLayout=function(){var e=this.props.maxTileWidth+this.props.tilePadding,t=i.findDOMNode(this);if(!t||0===t.clientWidth)return{tileWidth:this.state.tileWidth,tilesPerRow:this.props.tilesPerRow};var r=t.clientWidth,n=Math.max(1,Math.floor(r/e)),o=this.props.maxTileWidth;return r%e>1&&(n++,o=r/n-this.props.tilePadding),this.state.tileWidth!==o&&this.setState({tileWidth:o}),this.props.tilesPerRow!==n&&this.props.onTilesPerRowChange(n),{tileWidth:o,tilesPerRow:n}},t.prototype.setupTileLogging=function(e,t){var r=this.getPageHeight(),n=t*Math.ceil(r/e);this.tileLoadLogger=new c.InfiniteTileGridLogger(this.props.totalNumItems,n,t,this.handleTTI);var i=this.tileLoadLogger.pagesToLog.add(0);this.tileLoadLogger.pagesToLog=i;var o=this.tileLoadLogger.getTimeNow(),a=this.tileLoadLogger.startTimeByPage.set(0,o);this.tileLoadLogger.startTimeByPage=a,this.logTrackingInterval=setInterval(this.setLastViewedPage,200,r)},t.prototype.translateRowRangeToItemRange=function(e,t){var r=this.itemRangeByRow;return[r[e][0],r[t][1]]},t.prototype.render=function(){var e=this,t=this.itemRangeByRow;t.length=0;var r=[],i=this.getRowHeight(),o=this.props,a=o.containerClass,l=o.enableMaxHeightGrouping,c=o.numThresholdRows,u=o.scrollDeltaThreshold,d=o.sectionStartIndices,p=o.sectionLabels,h=o.totalNumItems;if(d&&d.count()>0)return this.rowHeights=[],d.forEach(function(o,a){var s=h;a!==d.count()-1&&(s=d.get(a+1)),e.rowHeights.push(32);var l=s-o,c=Math.ceil(l/e.props.tilesPerRow),u=p.get(a),m=n.createElement("div",{className:"tile-section-header"},u);r.push(m),t.push([o,o]);for(var f=0;f<c;f++){var g=o+f*e.props.tilesPerRow,_=Math.min(g+e.props.tilesPerRow,s),E=[g,_];r.push(E),t.push(E),e.rowHeights.push(i)}}),n.createElement(s.CulledList,{enableMaxHeightGrouping:l,items:r,listItemHeight:this.rowHeights,itemBuffer:c,className:a,renderRow:this.renderRow,scrollThreshold:u,shouldUseWindowAsScrollContainer:!0,onRangeInView:this.handleRangeInView});for(var m=Math.ceil(h/this.props.tilesPerRow),f=0;f<m;f++){var g=f*this.props.tilesPerRow,_=Math.min(g+this.props.tilesPerRow,h),E=[g,_];r.push(E),t.push(E)}return n.createElement(s.CulledList,{enableMaxHeightGrouping:l,items:r,listItemHeight:i,itemBuffer:c,className:a,renderRow:this.renderRow,scrollThreshold:u,shouldUseWindowAsScrollContainer:!0,onRangeInView:this.handleRangeInView})},t.defaultProps={enableMaxHeightGrouping:!1,numThresholdRows:10,tilePadding:16,tileHeight:160,maxTileWidth:160,labelHeight:40,logTileLoading:!1,scrollDeltaThreshold:1,showLabels:!0,getTileItem:function(e,t){return null},handleTTI:function(){}},t})(n.PureComponent);t.InfiniteTileGrid=h}),define("modules/clean/react/maestro/tile_grid_logger",["require","exports","external/immutable","modules/clean/js_client_stopwatch","modules/core/browser"],function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(function(){function e(e,t,n,i){var o=this;this.recordTileError=function(e){var t=Math.floor(e/o.numTilesPerPage);o.pagesWithThumbErrors.has(t)||(o.pagesWithThumbErrors=o.pagesWithThumbErrors.add(t))},this.recordTileLoaded=function(e,t,r){if(r){if(o.thumbsLoaded.has(e))return;o.thumbsLoaded=o.thumbsLoaded.add(e)}else{if(o.iconsLoaded.has(e))return;o.iconsLoaded=o.iconsLoaded.add(e)}var n=!1;n=o.numTiles%o.numTilesPerPage===0?e>=o.numTiles-o.numTilesPerPage:e>=o.numTiles-o.numTiles%o.numTilesPerPage;var i=o.numTilesPerPage;if(n){var a=o.numTiles%o.numTilesPerPage;0!==a&&(i=a)}var s=Math.floor(e/o.numTilesPerPage);if(r||!t){var l=o.numTilesFinalizedByPage,c=l.get(s)||0;o.numTilesFinalizedByPage=l.set(s,c+1)}if(0===s&&o.handleTTI){!(o.iconsLoaded.has(e)&&o.thumbsLoaded.has(e))&&(o.numTilesLoadedOnFirstPage++,o.numTilesLoadedOnFirstPage===i&&o.handleTTI())}r&&(o.pagesWithThumbs.has(s)||(o.pagesWithThumbs=o.pagesWithThumbs.add(s)),o.anyThumbLoadedTimeByPage.get(s)||(o.anyThumbLoadedTimeByPage=o.anyThumbLoadedTimeByPage.set(s,o.getTimeNow())),o.numTilesFinalizedByPage.get(s)===i&&(o.allThumbsLoadedTimeByPage=o.allThumbsLoadedTimeByPage.set(s,o.getTimeNow())))},this.pruneTrackedPages=function(){o.startTimeByPage.entrySeq().forEach(function(e){var t=e[0],r=e[1];!o.pagesToLog.has(t)&&!o.pagesCompletedLogging.has(t)&&o.getTimeNow()-r>2e3&&(o.startTimeByPage=o.startTimeByPage.delete(t))})},this.logCompletedPages=function(){o.pagesToLog.forEach(function(e){var t=o.startTimeByPage.get(e),r=Math.max(o.allThumbsLoadedTimeByPage.get(e),t),n=Math.max(o.anyThumbLoadedTimeByPage.get(e),t);return r&&!o.pagesWithThumbs.has(e)?void o.handlePageCompletedLogging(e):o.pagesWithThumbErrors.has(e)?void o.handlePageCompletedLogging(e):void(t&&r&&n&&(o.logPerfStats(e,t,n,r),o.handlePageCompletedLogging(e)))})},this.numTiles=e,this.numTilesPerPage=t,this.numTilesFinalizedByPage=r.List(),this.numTilesLoadedOnFirstPage=0,this.iconsLoaded=r.Set(),this.thumbsLoaded=r.Set(),this.startTimeByPage=r.Map(),this.allThumbsLoadedTimeByPage=r.Map(),this.anyThumbLoadedTimeByPage=r.Map(),this.pagesWithThumbErrors=r.Set(),this.pagesWithThumbs=r.Set(),this.pagesCompletedLogging=r.Set(),this.pagesToLog=r.Set(),this.handleTTI=i}return e.prototype.getTimeNow=function(){var e=i.performance(),t=-1;return e&&e.now&&(t=e.now()),t},e.prototype.updateNumTiles=function(e){this.numTiles>=e||(this.numTiles=e)},e.prototype.handlePageCompletedLogging=function(e){this.pagesCompletedLogging=this.pagesCompletedLogging.add(e),this.pagesToLog=this.pagesToLog.delete(e),this.startTimeByPage=this.startTimeByPage.delete(e),this.anyThumbLoadedTimeByPage=this.anyThumbLoadedTimeByPage.delete(e),this.allThumbsLoadedTimeByPage=this.allThumbsLoadedTimeByPage.delete(e)},e.logThumbLoadError=function(){n.JSStopwatch.recordTrace("visual_browse_thumb_load_error",{stopwatchName:"infinite_tile_grid_logging",traceTime:0})},e.logThumbRTT=function(e){n.JSStopwatch.recordTrace("visual_browse_thumb_rtt",{stopwatchName:"infinite_tile_grid_logging",traceTime:e})},e.prototype.logPerfStats=function(e,t,r,i){n.JSStopwatch.recordTrace("loaded_any_thumbs_page_"+e,{stopwatchName:"infinite_tile_grid_logging",traceTime:r-t}),n.JSStopwatch.recordTrace("loaded_all_thumbs_page_"+e,{stopwatchName:"infinite_tile_grid_logging",traceTime:i-t})},e})();t.InfiniteTileGridLogger=o}),define("modules/clean/react/outside_event",["require","exports","tslib","external/react","external/prop-types","external/lodash","modules/clean/react/util"],function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n.createElement,l=function(e,t,l,c){var u=null!=e.displayName?e.displayName:"UnnamedComponent";return d=(function(n){function i(){var e=null!==n&&n.apply(this,arguments)||this;return e._handleOutsideEvent=function(t){return"function"==typeof e.props[c]?e.props[c](t):void 0},e._handleInsideEvent=function(t){return t.stopPropagation(),"function"==typeof t.nativeEvent.stopImmediatePropagation&&t.nativeEvent.stopImmediatePropagation(),"function"==typeof e.props[l]?e.props[l](t):void 0},e}return r.__extends(i,n),i.prototype.componentDidMount=function(){return document.addEventListener(t,this._handleOutsideEvent,!1)},i.prototype.componentWillUnmount=function(){return document.removeEventListener(t,this._handleOutsideEvent,!1)},i.prototype.render=function(){return s(e,a.mergeProps(o.omit(this.props,l,c,"children"),(t={},t[l]=this._handleInsideEvent,t)),this.props.children);var t},i})(n.Component),d.displayName="Outside"+t+"Handled"+u,d.propTypes=(p={},p[l]=i.func,p[c]=i.func,p),d;var d,p};t.addOutsideEventHandling=l;var c=l("div","click","onClick","onOutsideClick");t.OutsideClickHandler=c;var u=l("div","mousedown","onMouseDown","onOutsideMouseDown");t.OutsideMouseDownHandler=u}),define("modules/clean/react/selection",["require","exports","tslib","external/immutable"],function(e,t,r,n){"use strict";function i(e,t){return new o({selected:e?n.OrderedSet(e):n.OrderedSet(),anchor:t||(e?e[0]:null)})}Object.defineProperty(t,"__esModule",{value:!0});var o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t})(n.Record({selected:null,anchor:null},"Selection"));t.Selection=o,t.createSelection=i}),define("modules/clean/search/emoji_utils",["require","exports"],function(e,t){"use strict";function r(e){var t=n();t.lastIndex=0;var r=t.exec(e);if(r&&0===r.index){var i=r[0];if("‍"===e[i.length])return"";var o=t.exec(e);return o&&o.index===i.length?"":i||""}return""}function n(){return i||(i=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g),i}Object.defineProperty(t,"__esModule",{value:!0});var i;t.getFirstEmojiFromTitle=r}),define("modules/clean/search/paper_formatting_utils",["require","exports","modules/clean/search/emoji_utils","external/react","modules/clean/search/search_highlights","spectrum/icon_content"],function(e,t,r,n,i,o){"use strict";function a(e,t,n,o){var a=e.title,l=e.highlight_spans,c=e.title_highlights,u=l&&l.length>0,d=r.getFirstEmojiFromTitle(a);if(d)if(a=a.substr(d.length),u){var p={string:l[0].string.substr(d.length),is_highlighted:l[0].is_highlighted};l=[p].concat(l.slice(1))}else if(c){var h=d.length/2;c=c.slice().map(function(e){return{pos:e.pos-h,len:e.string.length,string:e.string}})}var m;return m=u?i.highlightReactFromHighlightSpans(a,l):i.highlightMatchReact(a,c),{title:a,highlightedTitle:m,icon:s(d,d?n:t,o)}}function s(e,t,r){return e?n.createElement("div",{className:"mc-media-cell-icon"},n.createElement(o.IconContent,{name:r?"blank-large":"blank-small"}),n.createElement("span",{className:t},e)):n.createElement(o.IconContent,{name:r?"paper-large":"paper-small",className:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.getPaperDocTitleParts=a}),define("modules/clean/sharing/browse_exports",["require","exports","tslib","modules/core/browser","modules/constants/sharing","modules/clean/sharing/gating_util","modules/clean/sharing/async_share_modal_util","modules/clean/sharing/public_folder/public_folder","modules/clean/sharing/wizard/async_wizard_modals"],function(e,t,r,n,i,o,a,s,l){"use strict";function c(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e(["modules/clean/sharing/shared_content_link_sync_utils"],function(e){return e.mountSharedFolder.apply(e,t)})}function u(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(r){return[2,new Promise(function(r,n){e(["modules/clean/sharing/ui_util"],function(e){r(e.genContentManagerBridgeUri.apply(void 0,t))},n)})]})})}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.__awaiter(this,void 0,void 0,function(){var t;return r.__generator(this,function(r){switch(r.label){case 0:return[4,u.apply(void 0,e)];case 1:return t=r.sent(),n.open_tab(t.toString()),[2]}})})}function p(t,r,n,i,o,a,s){e(["modules/clean/sharing/cdm_new_folder_modal"],function(e){e.showCdmNewFolderModal(t,r,n,i,o,a,s)})}function h(t){return r.__awaiter(this,void 0,void 0,function(){var n;return r.__generator(this,function(r){switch(r.label){case 0:return[4,new Promise(function(t,r){e(["modules/clean/sharing/cdm_new_folder_modal_util"],t,r)})];case 1:return n=r.sent(),n.showAppropriateNewFolderModalForCdmUser(t),[2]}})})}function m(){return r.__awaiter(this,void 0,void 0,function(){var t;return r.__generator(this,function(r){switch(r.label){case 0:return i.SHARING_EXPERIMENTS.ENABLE_INVITE_POPUP?[4,new Promise(function(t,r){e(["modules/clean/sharing/invite_prompt_modal"],t,r)})]:[3,2];case 1:t=r.sent().maybeShowInvitePromptModal,t("create-folder-success"),r.label=2;case 2:return[2]}})})}Object.defineProperty(t,"__esModule",{value:!0}),t.asyncMountSharedFolder=c,t.asyncGoToContentManagerForPath=d,t.asyncShowCdmNewFolderModal=p,t.asyncShowAppropriateNewFolderModalForCdmUser=h,t.asyncShowInvitePromptModal=m,t.GoldenGate=o.GoldenGate,t.asyncShowShareModal=a.asyncShowShareModal,t.asyncShowNewFolderShareModal=a.asyncShowNewFolderShareModal,t.asyncShowPrefilledShareModal=a.asyncShowPrefilledShareModal,t.asyncShowSharedContentLinkSyncModal=a.asyncShowSharedContentLinkSyncModal,t.makePublicFolderLink=s.makePublicFolderLink,t.shouldUsePublicFolderSharing=s.shouldUsePublicFolderSharing,t.showPublicFolderLinkModal=s.showPublicFolderLinkModal,t.asyncShowShareAFolderWizardModal=l.asyncShowShareAFolderWizardModal}),define("modules/clean/sharing/constants",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e[e.PUBLIC=1]="PUBLIC",e[e.TEAM_ONLY=2]="TEAM_ONLY",e[e.PASSWORD=3]="PASSWORD",e[e.ONLY_YOU=99]="ONLY_YOU"})(t.SHMODEL_LINK_TOKEN_VISIBILITY||(t.SHMODEL_LINK_TOKEN_VISIBILITY={})),t.MEMBER_ACTION={LEAVE_A_COPY:"leave_a_copy",MAKE_EDITOR:"make_editor",MAKE_OWNER:"make_owner",MAKE_VIEWER:"make_viewer",MAKE_VIEWER_NO_COMMENT:"make_viewer_no_comment",REMOVE:"remove",ALL:["leave_a_copy","make_editor","make_owner","make_viewer","make_viewer_no_comment","remove"]},t.SNIPPET_SIZES={FILENAME:22,DISPLAY_NAME:26,EMAIL:30,OUT_OF_QUOTA_FOLDER_NAME:15},t.VALIDATE_PATH_PERMISSIONS={change_options:"canChangeOptions",disable_viewer_info:"disableViewerInfo",edit_contents:"canEditContents",enable_viewer_info:"enableViewerInfo",invite_editor:"canInviteEditor",invite_viewer:"canInviteViewer",invite_viewer_no_comment:"canInviteViewerNoComment",unshare:"canUnshareFolder",relinquish_membership:"canRelinquishMembership"},t.VALIDATE_PATH_PERMISSIONS_CONFIDENTIAL_AWARE={change_options:"canChangeOptions",disable_viewer_info:"disableViewerInfo",edit_contents:"canEditContents",enable_viewer_info:"enableViewerInfo",invite_editor:"canInviteEditor",invite_viewer:"canInviteViewer",invite_viewer_no_comment:"canInviteViewerNoComment",unshare:"canUnshareFolder",update_confidentiality:"canUpdateConfidentiality",relinquish_membership:"canRelinquishMembership"},t.ALPHA_FOLDER_METADATA_PERMISSIONS={change_options:"canChangeOptions",disable_viewer_info:"disableViewerInfo",edit_contents:"canEditContents",enable_viewer_info:"enableViewerInfo",invite_editor:"canInviteEditor",invite_viewer:"canInviteViewer",invite_viewer_no_comment:"canInviteViewerNoComment",leave_a_copy:"leaveACopy",relinquish_membership:"canRelinquishMembership",remove_download_policy:"removeDownloadPolicy",set_download_policy:"setDownloadPolicy",unmount:"canUnmountFolder",unshare:"canUnshareFolder",update_confidentiality:"canUpdateConfidentiality"},t.ALPHA_FILE_METADATA_PERMISSIONS={change_options:"canChangeOptions",disable_viewer_info:"disableViewerInfo",enable_viewer_info:"enableViewerInfo",invite_viewer:"canInviteViewer",invite_viewer_no_comment:"canInviteViewerNoComment",relinquish_membership:"canRelinquishMembership",remove_download_policy:"removeDownloadPolicy",set_download_policy:"setDownloadPolicy",unshare:"unshare"},t.FILE_METADATA_PERMISSIONS={invite_viewer:"canInviteViewer",invite_viewer_no_comment:"canInviteViewerNoComment",relinquish_membership:"canRelinquishMembership",unshare:"unshare"},t.SHARE_ACTION_ORIGIN_TYPE={BROWSE_FILE_ACTIONS:"BROWSE_FILE_ACTIONS",BROWSE_FILE_ROW:"BROWSE_FILE_ROW",BROWSE_GLOBAL_ACTIONS:"BROWSE_GLOBAL_ACTIONS",BROWSE_SHARED_FOLDER_BANNER:"BROWSE_SHARED_FOLDER_BANNER",CONTENT_MANAGER:"CONTENT_MANAGER",DESKTOP_CLIENT:"DESKTOP_CLIENT",EVENTS_PAGE:"EVENTS_PAGE",FILE_ROW_SHARE_MENU:"FILE_ROW_SHARE_MENU",GRANT_ACCESS:"GRANT_ACCESS",LEGACY_BROWSE:"LEGACY_BROWSE",LINKS_PAGE:"LINKS_PAGE",NOTIFICATION_WEB:"NOTIFICATION_WEB",OFFICE_INTEGRATION:"OFFICE_INTEGRATION",OUT_OF_QUOTA_MODAL:"OUT_OF_QUOTA_MODAL",PARENT_FOLDER_MODAL:"PARENT_FOLDER_MODAL",PREVIEW_PAGE:"PREVIEW_PAGE",PREVIEW_PAGE_FACEPILE:"PREVIEW_PAGE_FACEPILE",RECENTS:"RECENTS",SHARE:"SHARE",SHARE_LINK_MODAL:"SHARE_LINK_MODAL",SYNC_MODAL:"SYNC_MODAL",WIZARD:"WIZARD"};(function(e){e.Content="c",e.Shmodel="s"})(t.SharedLinkType||(t.SharedLinkType={}))}),define("modules/clean/sharing/gating_util",["require","exports","modules/constants/sharing"],function(e,t,r){"use strict";function n(e){return r.TRUELINK.NO_COMMENT_ENABLED&&!!(null!=e?r.TRUELINK.NO_COMMENT_ENABLED[e.id]:void 0)}Object.defineProperty(t,"__esModule",{value:!0}),t.GoldenGate={hasNewOwnershipModel:function(e){return Boolean(r.GOLDEN_GATE.HAS_NEW_OWNERSHIP_MODEL[e])},hasContentManagerAndSuperAdmin:function(e){return Boolean(r.GOLDEN_GATE.HAS_CONTENT_MANAGER_AND_SUPER_ADMIN[e])},hasContentManagerActionsDisabled:function(e){return Boolean(r.GOLDEN_GATE.HAS_CONTENT_MANAGER_ACTIONS_DISABLED[e])},hasContentManagerCdm:function(e){return Boolean(r.GOLDEN_GATE.HAS_CONTENT_MANAGER_CDM[e])},hasContentManagerFolderRestore:function(e){return Boolean(r.GOLDEN_GATE.CAN_RESTORE_FOLDERS_IN_CM[e])},useSetAccessInheritanceAPI:function(e){return Boolean(r.GOLDEN_GATE.CDM_USE_SET_ACCESS_INHERITANCE_API[e])},SHARING_TOTAL_LIMIT:r.GOLDEN_GATE.SHARING_TOTAL_LIMIT},t.isUserNoCommentEnabled=n}),define("modules/clean/sharing/public_folder/public_folder",["require","exports","modules/core/uri","modules/constants/public_folder_constants"],function(e,t,r,n){"use strict";function i(e,t){if(e.publicAppToken)return t;if(!e.isPublicFolderEnabled)return null;var r=(e.publicFolderFqPath||"/public").toLowerCase(),n=t.toLowerCase();return n===r?"/":n.startsWith(r+"/")?t.substring(r.length):null}function o(e,t){return null!=i(e,t)}function a(e,t,o,a){if(a)return null;var s,l=i(t,o);if(s=n.SHOULD_REDIRECT_URL?"u"+e+".dl.dropboxusercontent.com":"dl.dropboxusercontent.com",null!=l){var c=new r.URI({scheme:"https",authority:s});return t.publicAppToken?(c.setPath("/spa/"+t.publicAppToken+l+"/data"),c.toString()):(c.setPath("/u/"+e+l),c.toString())}return null}function s(t){return new Promise(function(r,n){e(["external/react","modules/clean/react/modal","modules/clean/sharing/public_folder/modal"],function(e,n,i){var o=n.Modal,a=i.CopyPublicLinkModal;o.showInstance(e.createElement(a,{publicLink:t})),r()})})}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUsePublicFolderSharing=o,t.makePublicFolderLink=a,t.showPublicFolderLinkModal=s});
//# sourceMappingURL=pkg-browse-and-photos.min.js-vflX3Iif4.map