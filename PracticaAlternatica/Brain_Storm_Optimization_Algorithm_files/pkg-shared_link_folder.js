define("modules/clean/ajax_util",["require","exports","modules/clean/window_util"],function(e,n,t){"use strict";function r(e){return new Promise(function(n,r){function i(){return e().then(n)}var o=!1;t.onBeforeUnload(function(){o=!0}),i().catch(function(e){o?t.onPageRestore(function(){i().catch(r)}):r(e)})})}Object.defineProperty(n,"__esModule",{value:!0}),n.requestWithRetry=r}),define("modules/clean/prefetch/prefetch",["require","exports"],function(e,n){"use strict";function t(e){var n=window[e];if(n)return r(n)}function r(e){return new Promise(function(n,t){var r=e.getDataIfAvailable();r?r.payload?n(JSON.parse(r.payload)):t(r.error):e(function(e){return n(JSON.parse(e))},t)})}Object.defineProperty(n,"__esModule",{value:!0}),n.getPrefetchData=t}),define("modules/clean/react/shared_link_folder/actions",["require","exports","modules/clean/history","modules/clean/react/shared_link_folder/api","modules/clean/react/shared_link_folder/constants","modules/clean/react/shared_link_folder/dispatcher","modules/clean/react/shared_link_folder/utils","modules/core/browser","modules/core/i18n","modules/core/notify","modules/core/uri"],function(e,n,t,r,i,o,s,a,l,d,c){"use strict";function u(e){g("preview",e.filename)}function p(){y("preview")}function m(e){if(s.isNoAccessFolder(e))return void d.Notify.error(l._("Canâ€™t open %(folder_name)s. Ask your admin for access.").format({folder_name:e.filename}));var n=c.URI.parse(e.href);"lst"in t.get_uri().getQuery()&&n.updateQuery({lst:""}),a.redirect(n.toString())}function f(){g("lst","")}function h(){y("lst")}function _(e,n){function t(e){o.sharedLinkFolderDispatcher.dispatch({type:i.SharedLinkFolderAction.FetchPageSuccess,data:e}),e.hasMoreEntries?r.fetchNextPage(n,e.nextRequestVoucher).then(t):o.sharedLinkFolderDispatcher.dispatch({type:i.SharedLinkFolderAction.LoadEnd})}o.sharedLinkFolderDispatcher.dispatch({type:i.SharedLinkFolderAction.LoadStart}),r.fetchFirstPage(n).then(t),o.sharedLinkFolderDispatcher.dispatch({type:i.SharedLinkFolderAction.InitializeCurrentFolder,data:{currentFolder:e}})}function k(){o.sharedLinkFolderDispatcher.dispatch({type:i.SharedLinkFolderAction.DismissOpenInAppBanner})}function w(e){t.push_state(e.getPath(),e.getQuery())}function g(e,n){var r={};r[e]=n;var i=t.get_uri();i.updateQuery(r),w(i)}function y(e){var n=t.get_uri();n.removeQuery(e),w(n)}Object.defineProperty(n,"__esModule",{value:!0}),n.openFile=u,n.closeFile=p,n.openFolder=m,n.enableListMode=f,n.disableListMode=h,n.loadFolder=_,n.dismissOpenInAppBanner=k}),define("modules/clean/react/shared_link_folder/api",["require","exports","modules/clean/ajax_as_promised","modules/clean/ajax_util","modules/clean/prefetch/prefetch"],function(e,n,t,r,i){"use strict";function o(e){return{is_dir:e.is_dir,filename:e.filename,sort_key:e.sort_key,href:e.href,bytes:e.bytes,direct_blockserver_link:e.direct_blockserver_link,ns_id:e.ns_id,preview_type:e.preview_type?e.preview_type:null,preview_url:e.preview_url,sjid:e.sjid,ts:e.ts,thumbnail_url_tmpl:e.thumbnail_url_tmpl,beacon_context:e.beacon_context,file_id:e.file_id,video_container:e.video_container,video_transcode_url:e.video_transcode_url,video_metadata_url:e.video_metadata_url,preview_ssr_image_url_tmpl:e.preview_ssr_image_url_tmpl,preview_ssr_text_url_tmpl:e.preview_ssr_text_url_tmpl,preview_ssr_refresh_url:e.preview_ssr_refresh_url,htmlified_link:e.htmlified_link,linkfile_data:e.linkfile_data,revision_id:e.revision_id}}function s(e){return{_mount_access_perms:e._mount_access_perms,is_dir:e.is_dir,filename:e.filename,sort_key:e.sort_key,href:e.href,shared_folder_id:e.shared_folder_id,open_in_app_data:e.open_in_app_data}}function a(e){return{url:e.url,downloadTestUrl:e.downloadTestUrl,ownerName:e.ownerName,ownerTeamName:e.ownerTeamName,ownerTeamLogo:e.ownerTeamLogo,downloadUrl:e.downloadUrl}}function l(e){return{canCopyToDropboxRoles:e.canCopyToDropboxRoles,canDownloadRoles:e.canDownloadRoles,canPrintRoles:e.canPrintRoles,canRemoveLinkUids:e.canRemoveLinkUids,canSyncToDropboxRoles:e.canSyncToDropboxRoles,canViewContextMenuRoles:e.canViewContextMenuRoles,canViewMetadataRoles:e.canViewMetadataRoles}}function d(e){return{displayName:e.displayName,isPackage:e.isPackage,itemId:e.itemId,linkKey:e.linkKey,linkType:e.linkType,secureHash:e.secureHash,subPath:e.subPath}}function c(e){for(var n=[],t=0,r=e.entries;t<r.length;t++){var i=r[t];i.is_dir?n.push(s(i)):n.push(o(i))}return{entries:n,sharedLinkInfos:e.shared_link_infos.map(a),sharePermissions:e.share_permissions.map(l),shareTokens:e.share_tokens.map(d),hasMoreEntries:e.has_more_entries,nextRequestVoucher:e.next_request_voucher,takedownRequestType:e.takedown_request_type}}function u(e,n){return new Promise(function(i){var o={};o.link_key=e.linkKey,o.link_type=e.linkType,o.secure_hash=e.secureHash,o.sub_path=e.subPath,n&&(o.voucher=n),r.requestWithRetry(function(){return t.WebRequest({type:"POST",url:"/list_shared_link_folder_entries",data:o,dataType:"json"})}).then(function(e){i(c(e))})})}function p(){var e=i.getPrefetchData("__REGISTER_SHARED_LINK_FOLDER_PRELOAD_HANDLER");if(e)return e.then(c)}function m(e){return p()||u(e)}function f(e,n){return u(e,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.fetchFirstPage=m,n.fetchNextPage=f}),define("modules/clean/react/shared_link_folder/app",["require","exports","tslib","external/lodash","external/react","external/react-redux","external/redux","modules/clean/open_in_app/actions","modules/clean/react/async/loadable","modules/clean/react/file_viewer/app_download_interstitial/app_download_interstitial","modules/clean/react/file_viewer/data/actions","modules/clean/react/file_viewer/data/selectors","modules/clean/react/file_viewer/data/store","modules/clean/react/file_viewer/location_utils","modules/clean/react/location/with_location","modules/clean/react/previews/constants","modules/clean/react/shared_link_folder/actions","modules/clean/react/shared_link_folder/page","modules/clean/react/shared_link_folder/store","modules/clean/viewer","modules/clean/web_timing_logger","modules/clean/web_timing_logger","modules/clean/web_timing_logger","modules/constants/file_viewer","modules/constants/python","modules/core/browser","modules/core/exception"],function(e,n,t,r,i,o,s,a,l,d,c,u,p,m,f,h,_,k,w,g,y,v,S,F,L,b,E){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var C=function(){return Promise.all([new Promise(function(n,t){e(["modules/clean/react/file_viewer/file_viewer"],n,t)}),new Promise(function(n,t){e(["modules/clean/react/file_viewer/actions"],n,t)})])},I=r.memoize(C),T=l.Loadable({loader:function(){return I().then(function(e){var n=e[0].FileViewer;e[1];return n})}}),N=(function(e){function n(n){var t=e.call(this,n)||this;t.onUpdateFromStore=function(){if(t.setState(t.getStateFromStore()),t.isViewingFile){var e=m.getFilenameFromLocation(t.props.location);setTimeout(function(){t.setupFileViewer(e)},0)}},t.onInterstitialClose=function(){t.props.onAppDownloadInterstitialDismissed()},t.onInterstitialContinue=function(){t.props.onAppDownloadInterstitialDismissed()};var r=g.Viewer.get_viewer(),i=r.work_user||r.personal_user;return t.state={files:[],fileSharePermissions:[],fileShareTokens:[],fileSharedLinkInfos:[],folders:[],isLoading:!1,showOpenInAppBanner:!1,user:i},t.hasAlreadyRendered=!1,t}return t.__extends(n,e),n.prototype.componentWillMount=function(){y.log_js_modules_application_code_start(),this.isViewingFile&&this.setupFileViewer(m.getFilenameFromLocation(this.props.location)),this.props.openImmediatelyInApp&&this.openImmediatelyInApp(),this.unsubscribe=w.sharedLinkFolderStore.addListener(this.onUpdateFromStore),_.loadFolder(this.props.folder,this.props.folderShareToken)},n.prototype.componentWillUnmount=function(){this.unsubscribe()},Object.defineProperty(n.prototype,"isViewingFile",{get:function(){return!!m.getFilenameFromLocation(this.props.location)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"shouldForceListMode",{get:function(){return"lst"in this.props.location.query},enumerable:!0,configurable:!0}),n.prototype.getStateFromStore=function(){return{files:w.sharedLinkFolderStore.getFiles(),fileSharedLinkInfos:w.sharedLinkFolderStore.getFileSharedLinkInfos(),fileShareTokens:w.sharedLinkFolderStore.getFileShareTokens(),fileSharePermissions:w.sharedLinkFolderStore.getFileSharePermissions(),folders:w.sharedLinkFolderStore.getFolders(),isLoading:w.sharedLinkFolderStore.getIsLoading(),showOpenInAppBanner:w.sharedLinkFolderStore.showOpenInAppBanner(),takedownRequestType:w.sharedLinkFolderStore.getTakedownRequestType()}},n.prototype.openImmediatelyInApp=function(){try{this.props.folder.open_in_app_data&&a.openImmediately(this.props.folder.open_in_app_data)}catch(e){}},n.prototype.componentDidMount=function(){this.hasAlreadyRendered=!0,this.shouldShowAppDownloadInterstitial()&&S.mark_time_to_interactive(),v.waitForTTI().then(function(){return I()})},n.prototype.componentWillUpdate=function(e){var n=m.getFilenameFromLocation(e.location);!this.isViewingFile&&n&&this.setupFileViewer(n)},n.prototype.setupFileViewer=function(e){return t.__awaiter(this,void 0,void 0,function(){var n,i,o,s,a,l,d,c,u;return t.__generator(this,function(t){switch(t.label){case 0:return[4,I()];case 1:return n=t.sent(),i=n[1],d=r.find(this.state.files,function(n){return n.filename===e}),d?(o=this.state.files,s=this.state.fileSharePermissions,a=this.state.fileShareTokens,l=this.state.fileSharedLinkInfos,c=o.indexOf(d)):(E.assert(!!this.props.preview,"no preview data available"),u=this.props.preview,d=u.file,E.assert(d.filename===e,"preview data does not match desired file"),o=[d],s=[u.sharePermission],a=[u.shareToken],l=[u.sharedLinkInfo],c=0),i.setup(o,c,this.state.user,{sharedLinkInfos:l,shareTokens:a,sharePermissions:s}),[2]}})})},n.prototype.shouldShowAppDownloadInterstitial=function(){return!F.RESPONSIVE_SHARED_LINKS_SKIP_INTERSTITIAL&&b.is_mobile_or_tablet()&&this.props.folder.open_in_app_data&&!this.props.appDownloadInterstitialDismissed},n.prototype.render=function(){if(this.isViewingFile){var e=this.hasAlreadyRendered?h.PreviewSourceAction.Click:h.PreviewSourceAction.Visit;return i.createElement(T,{activityContext:this.props.activityContext,canClose:!0,className:"no-background",fileViewOrigin:this.props.fileViewOrigin,fileViewTarget:this.props.fileViewTarget,fileViewAction:L.FileViewActionType.CLICK,initialPreviewSourceContext:h.PreviewSourceContext.SharedLinkFolder,initialPreviewSourceAction:e,skipOuterRouting:!0,onCloseViewer:_.closeFile})}if(this.shouldShowAppDownloadInterstitial())return i.createElement("div",{"aria-label":this.props.folderShareToken.displayName},i.createElement(d.AppDownloadInterstitial,{isFolder:!0,fileOrFolderName:this.props.folderShareToken.displayName,open_in_app_data:this.props.folder.open_in_app_data,ownerName:this.props.folderSharedLinkInfo.ownerName,ownerTeamName:this.props.folderSharedLinkInfo.ownerTeamName,onClose:this.onInterstitialClose,onContinue:this.onInterstitialContinue}));var n={files:this.state.files,folders:this.state.folders};return i.createElement(k.SharedLinkFolderPage,{accountMenuOptions:this.props.accountMenuOptions,folder:this.props.folder,folderSharedLinkInfo:this.props.folderSharedLinkInfo,folderShareToken:this.props.folderShareToken,folderSharePermission:this.props.folderSharePermission,isLoading:this.state.isLoading,contents:n,user:this.state.user,outOfQuota:this.props.outOfQuota,shouldForceListMode:this.shouldForceListMode,showSyncCoachmark:this.props.showSyncCoachmark,showOpenInAppBanner:this.state.showOpenInAppBanner,takedownRequestType:this.state.takedownRequestType})},n})(i.Component),P=f.withLocation(N),x=function(e){return s.bindActionCreators({onAppDownloadInterstitialDismissed:c.dismissAppDownloadInterstitial},e)},A=o.connect(function(e){return{appDownloadInterstitialDismissed:u.getAppDownloadInterstitial(e)}},x)(P),R=p.getStoreForFileViewer(),O=function(e){return i.createElement(o.Provider,{store:R},i.createElement(A,t.__assign({},e)))};n.SharedLinkFolderApp=O}),define("modules/clean/react/shared_link_folder/constants",["require","exports"],function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});(function(e){e[e.DismissOpenInAppBanner=0]="DismissOpenInAppBanner",e[e.FetchPageSuccess=1]="FetchPageSuccess",e[e.InitializeCurrentFolder=2]="InitializeCurrentFolder",e[e.LoadStart=3]="LoadStart",e[e.LoadEnd=4]="LoadEnd"})(n.SharedLinkFolderAction||(n.SharedLinkFolderAction={}))}),define("modules/clean/react/shared_link_folder/dispatcher",["require","exports","modules/clean/flux/dispatcher"],function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sharedLinkFolderDispatcher=t.Dispatcher}),define("modules/clean/react/shared_link_folder/folder_icon",["require","exports","external/react","modules/clean/react/shared_link_folder/utils","modules/clean/react/icon/icon_helper","modules/clean/react/icon/old_icons"],function(e,n,t,r,i,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SharedLinkFolderFolderIcon=function(e){var n=e.className,i=e.folder,s=e.size;return t.createElement(o.OldFolderIcon,{alt:i.filename,className:n,isConfidential:r.isNoAccessFolder(i),size:s})},n.SharedLinkFolderFolderIcon.defaultProps={size:i.ICON_SIZES.LARGE}}),define("modules/clean/react/shared_link_folder/grid",["require","exports","tslib","external/react","modules/clean/em_string","modules/clean/previews/constants","modules/clean/react/icon/old_icons","modules/clean/react/shared_link_folder/actions","modules/clean/react/shared_link_folder/folder_icon","modules/clean/react/shared_link_folder/utils","modules/clean/react/thumbnail"],function(e,n,t,r,i,o,s,a,l,d,c){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var u=(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.renderCell=function(e){var n=i.Emstring.em_snippet(e.filename,16);return e.is_dir?r.createElement(m,{folder:e,label:n}):r.createElement(p,{file:e,label:n})},n.prototype.render=function(){var e=this,n=this.props.entries.map(function(n){return r.createElement("li",{className:"sl-grid-cell",key:n.filename},e.renderCell(n))});return r.createElement("div",{className:"sl-grid"},r.createElement("div",{className:"sl-grid-header clearfix"},r.createElement("div",{className:"sl-grid-header-column sl-grid-header-column--sort"},"Sorted by name")),r.createElement("ol",{className:"sl-grid-body clearfix"},n))},n})(r.Component);n.SharedLinkFolderGrid=u;var p=(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.onClick=d.linkClickHandler(function(e){e.preventDefault(),a.openFile(n.props.file)}),n}return t.__extends(n,e),Object.defineProperty(n.prototype,"isVideo",{get:function(){return this.props.file.preview_type===o.PreviewType.Video},enumerable:!0,configurable:!0}),n.prototype.renderIconOrThumbnail=function(){var e;return this.isVideo&&(e=r.createElement("div",{className:"sl-video-watermark"})),r.createElement("span",null,r.createElement(c.ThumbnailIcon,{alt:this.props.file.filename,className:"sl-grid-thumbnail",file:this.props.file,iconSize:s.ICON_SIZES.XLARGE}),e)},n.prototype.render=function(){return r.createElement("a",{href:this.props.file.href,onClick:this.onClick,className:"sl-link sl-link--file",title:this.props.file.filename},r.createElement("div",{className:"sl-grid-thumbnail-container"},this.renderIconOrThumbnail()),r.createElement("div",{className:"sl-grid-filename"},this.props.label))},n})(r.Component);n.FileCell=p;var m=(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.onClick=d.linkClickHandler(function(e){e.preventDefault(),a.openFolder(n.props.folder)}),n}return t.__extends(n,e),n.prototype.render=function(){var e=this.props,n=e.folder,t=e.label;return r.createElement("a",{href:n.href,onClick:this.onClick,className:"sl-link sl-link--folder",title:n.filename},r.createElement("div",{className:"sl-grid-thumbnail-container"},r.createElement(l.SharedLinkFolderFolderIcon,{className:"sl-grid-thumbnail",folder:n,size:s.ICON_SIZES.XLARGE})),r.createElement("div",{className:"sl-grid-filename"},t))},n})(r.PureComponent);n.FolderCell=m}),define("modules/clean/react/shared_link_folder/list",["require","exports","tslib","external/react","spectrum/table","spectrum/media_table","modules/clean/datetime","modules/clean/em_string","modules/clean/react/shared_link_folder/actions","modules/clean/react/shared_link_folder/folder_icon","modules/clean/react/thumbnail","modules/core/i18n","modules/core/uri","modules/core/browser","modules/clean/react/size_class/constants"],function(e,n,t,r,i,o,s,a,l,d,c,u,p,m,f){"use strict";function h(e){var n=e.entry,t=e.sizeClass;return n.is_dir?r.createElement(w,{folder:n,sizeClass:t}):r.createElement(g,{file:n,sizeClass:t})}Object.defineProperty(n,"__esModule",{value:!0});var _=(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.render=function(){var e=this.props,n=e.entries,t=e.sizeClass;return r.createElement(i.Table,{className:"sl-list-container"},r.createElement(i.TableHead,null,r.createElement(i.TableHeadCell,null,u._("Name")),t!==f.SizeClass.Small?r.createElement(i.TableHeadCell,null,u._("Modified",{comment:"label for last modified time"})):null),r.createElement(i.TableBody,null,n.map(function(e){return r.createElement(h,{key:e.filename,entry:e,sizeClass:t})})))},n})(r.Component);n.SharedLinkFolderList=_;var k=(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.onClick=function(){var e=n.props,t=e.href,r=e.onClick;r?r():t&&m.redirect(n.props.href)},n}return t.__extends(n,e),n.prototype.render=function(){var e=this.props,n=e.icon,t=e.lastModified,i=e.name,l=e.sizeClass;return r.createElement(o.MediaRow,{onClick:this.onClick},r.createElement(o.MediaCell,{className:"sl-list-column--filename",icon:n,title:a.Emstring.em_snippet(i,40)}),l!==f.SizeClass.Small?r.createElement(o.MediaCell,{className:"sl-list-column--modified",title:t?s.format_date(t,s.localized_datetime_format):"--"}):null)},n})(r.Component),w=(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.onClick=function(){return l.openFolder(n.props.folder)},n}return t.__extends(n,e),n.prototype.render=function(){var e=this.props,n=e.folder,t=e.sizeClass,i=p.URI.parse(n.href).updateQuery({lst:""}),o=i.toString();return r.createElement("a",{href:o},r.createElement(k,{icon:r.createElement(d.SharedLinkFolderFolderIcon,{className:"sl-list-icon",folder:n}),href:o,name:n.filename,onClick:this.onClick,sizeClass:t}))},n})(r.Component),g=(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.onClick=function(){return l.openFile(n.props.file)},n}return t.__extends(n,e),n.prototype.render=function(){var e=this.props,n=e.file,t=e.sizeClass;return r.createElement("a",{href:n.href},r.createElement(k,{icon:r.createElement(c.ThumbnailIcon,{alt:n.filename,className:"sl-list-icon",file:n}),lastModified:new Date(1e3*n.ts),name:n.filename,href:n.href,onClick:this.onClick,sizeClass:t}))},n})(r.Component)}),define("modules/clean/react/shared_link_folder/page",["require","exports","tslib","external/classnames","external/react","modules/clean/analytics","modules/clean/components/loading_indicator","modules/clean/react/browse/sort_helpers","modules/clean/react/css","modules/clean/react/async/loadable","modules/clean/em_string","modules/clean/previews/responsive_utils","modules/clean/react/open_in_app/banner","modules/clean/react/shared_link_folder/actions","modules/clean/react/shared_link_folder/folder_icon","modules/clean/react/shared_link_folder/grid","modules/clean/react/shared_link_folder/list","modules/clean/react/shared_link_folder/view_toggle","modules/clean/react/takedown_warning","modules/clean/sharing/constants","modules/clean/web_timing_logger","modules/constants/trademark","modules/core/i18n","modules/core/uri","modules/clean/react/icon/icon_helper","modules/clean/react/size_class/size_class","modules/clean/react/size_class/constants"],function(e,n,t,r,i,o,s,a,l,d,c,u,p,m,f,h,_,k,w,g,y,v,S,F,L,b,E){"use strict";function C(e,n){return a.compare(e.sort_key,n.sort_key,1)}function I(e,n){return void 0===e&&(e=[]),void 0===n&&(n=[]),n.concat(e).sort(C)}function T(e){return i.createElement("div",{className:"sl-body sl-body--empty-folder"},i.createElement(f.SharedLinkFolderFolderIcon,{className:"sl-empty-folder-icon",folder:e.folder,size:L.ICON_SIZES.XLARGE}),i.createElement("h3",{className:"sl-empty-folder-message"},S._("This folder is empty")))}function N(e){var n=e.files,t=e.folder,r=e.isLoading,o=e.shouldForceListMode,s=e.sizeClass,a=e.subfolders,l=I(n,a);return l.length||r?i.createElement("div",{className:"sl-body"},o?[i.createElement(_.SharedLinkFolderList,{entries:l,sizeClass:s}),i.createElement(k.FolderViewToggleOption,{icon:"grid_light",label:S._("View as grid"),onClick:m.disableListMode})]:[i.createElement(h.SharedLinkFolderGrid,{entries:l}),i.createElement(k.FolderViewToggleOption,{icon:"list_light",label:S._("View as list"),onClick:m.enableListMode})]):i.createElement(T,{folder:t})}function P(e){var n=e.title,t=e.ownerName,r=e.ownerTeamName,o=e.ownerTeamLogo,s=e.sizeClass;return i.createElement("span",null,n,s===E.SizeClass.Small?i.createElement("br",null):null,i.createElement(x,{ownerName:t,ownerTeamName:r,ownerTeamLogo:o}))}function x(e){var n=e.ownerName,t=e.ownerTeamName,r=e.ownerTeamLogo;return t?i.createElement("div",{className:"sl-title-owner"},null!=n?S._("from %(owner)s (%(team)s)").format({owner:n,team:t}):S._("from %(team)s").format({team:t}),null!=r?i.createElement("span",null," ","via ",i.createElement("a",{href:M},v.TRADEMARK_BUSINESS)):null):null}Object.defineProperty(n,"__esModule",{value:!0});var A=d.Loadable({loader:function(){return new Promise(function(n,t){e(["modules/clean/react/shared_link_folder/title_bar"],n,t)}).then(function(e){return e.SharedLinkFolderTitleBar})}}),R=(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.componentDidMount=function(){this.ensureWebTimingMarked(),this.logSclTiming()},n.prototype.componentDidUpdate=function(){this.ensureWebTimingMarked()},n.prototype.ensureWebTimingMarked=function(){var e=this.props.contents,n=e.files,t=e.folders,r=!this.props.isLoading,i=n.length>0||t.length>0;(r||i)&&(y.mark_time_to_view(),y.mark_time_to_interactive())},n.prototype.logSclTiming=function(){if(this.props.user&&this.props.folderShareToken.linkType===g.SharedLinkType.Content){var e=(new Date).getTime(),n={ns_id:this.props.folder.shared_folder_id,timing:e-y.start_time()};o.ShareTibEventLogger.log(this.props.user.id,"PREVIEW_RENDER",g.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_PAGE,n)}},n.prototype.render=function(){var e=this.props,n=e.accountMenuOptions,t=e.contents,o=e.folder,a=e.folderSharedLinkInfo,l=e.folderSharePermission,d=e.folderShareToken,u=e.isLoading,f=e.outOfQuota,h=e.shouldForceListMode,_=e.showOpenInAppBanner,k=e.showSyncCoachmark,g=e.sizeClass,y=e.takedownRequestType,v=e.user,S=i.createElement(P,{sizeClass:g,title:c.Emstring.em_snippet(d.displayName,g!==E.SizeClass.Small?35:20),ownerName:a.ownerName,ownerTeamName:a.ownerTeamName,ownerTeamLogo:a.ownerTeamLogo}),F=r({"sl-page-body":!0,"view-in-app-bar-present":_});return i.createElement("div",{className:"sl-page-container"},i.createElement("div",{className:"sl-page-header"},i.createElement(A,{accountMenuOptions:n,folder:o,outOfQuota:f,sharedLinkInfo:a,shareToken:d,sharePermission:l,showSyncCoachmark:k,sizeClass:g,title:g===E.SizeClass.Small?S:void 0,user:v}),_?i.createElement(p.OpenInAppBanner,{urls:o.open_in_app_data,onClose:m.dismissOpenInAppBanner}):null),i.createElement("div",{className:F},i.createElement("div",{className:"sl-header clearfix"},i.createElement("h3",{className:"sl-title"},null!=y?i.createElement("div",{className:"sl-takedown-warning"},i.createElement(w,{type:y})):null,g!==E.SizeClass.Small?S:null)),i.createElement(N,{files:t.files,folder:o,isLoading:u,shouldForceListMode:h,sizeClass:g,subfolders:t.folders}),u?i.createElement("div",{className:"sl-loading-indicator"},i.createElement(s.LoadingIndicator,{style:s.LoadingIndicator.LoadingIndicatorStyle.BLUE_SPINNER})):null))},n.defaultProps={shouldForceListMode:!1},n})(i.Component);n._SharedLinkFolderPage=R;var O=l(R,["/static/css/react_title_bar-vfluJBlN3.css","/static/css/react_file_viewer-vflcsjmlw.css"]),D=b.withSizeClass(O,{isResponsiveEnabled:u.isResponsiveEnabled});n.SharedLinkFolderPage=D;var M=new F.URI({scheme:"https",authority:"www.dropbox.com",path:"/business",query:{src:"schmodel"}}).toString()}),define("modules/clean/react/shared_link_folder/store",["require","exports","tslib","modules/clean/flux/flux_store","modules/clean/react/shared_link_folder/constants","modules/clean/react/shared_link_folder/dispatcher"],function(e,n,t,r,i,o){"use strict";function s(e){return!e.is_dir}Object.defineProperty(n,"__esModule",{value:!0});var a=(function(e){function n(n){var t=e.call(this,n)||this;return t.fileIds={},t.folderFilenames={},t.fileIds={},t.files=[],t.fileSharedLinkInfos=[],t.fileSharePermissions=[],t.fileShareTokens=[],t.folderFilenames={},t.folders=[],t.isLoading=!1,t.viewInAppBannerDismissed=!1,t}return t.__extends(n,e),n.prototype.getFolders=function(){return this.folders},n.prototype.getFiles=function(){return this.files},n.prototype.getFileSharePermissions=function(){return this.fileSharePermissions},n.prototype.getFileShareTokens=function(){return this.fileShareTokens},n.prototype.getFileSharedLinkInfos=function(){return this.fileSharedLinkInfos},n.prototype.getIsLoading=function(){return this.isLoading},n.prototype.getTakedownRequestType=function(){return this.takedownRequestType},n.prototype.showOpenInAppBanner=function(){return!this.viewInAppBannerDismissed&&!(!this.currentFolder||!this.currentFolder.open_in_app_data)},n.prototype.handleFetchPageSuccess=function(e){var n=this;e.entries.forEach(function(t,r){s(t)?t.file_id in n.fileIds||(n.fileIds[t.file_id]=!0,n.files.push(t),n.fileSharedLinkInfos.push(e.sharedLinkInfos[r]),n.fileSharePermissions.push(e.sharePermissions[r]),n.fileShareTokens.push(e.shareTokens[r])):t.filename in n.folderFilenames||(n.folderFilenames[t.filename]=!0,n.folders.push(t))}),!this.takedownRequestType&&e.takedownRequestType&&(this.takedownRequestType=e.takedownRequestType),this.__emitChange()},n.prototype.handleLoadStart=function(){this.isLoading=!0,this.__emitChange()},n.prototype.handleLoadEnd=function(){this.isLoading=!1,this.__emitChange()},n.prototype.handleDismissViewInAppBanner=function(){this.viewInAppBannerDismissed=!0,this.__emitChange()},n.prototype.initializeCurrentFolder=function(e){this.currentFolder=e.currentFolder,this.__emitChange()},n.prototype.__onDispatch=function(e){e.action.type===i.SharedLinkFolderAction.DismissOpenInAppBanner?this.handleDismissViewInAppBanner():e.action.type===i.SharedLinkFolderAction.FetchPageSuccess?this.handleFetchPageSuccess(e.action.data):e.action.type===i.SharedLinkFolderAction.InitializeCurrentFolder?this.initializeCurrentFolder(e.action.data):e.action.type===i.SharedLinkFolderAction.LoadStart?this.handleLoadStart():e.action.type===i.SharedLinkFolderAction.LoadEnd&&this.handleLoadEnd()},n})(r.FluxStore);n.sharedLinkFolderStore=new a(o.sharedLinkFolderDispatcher)}),define("modules/clean/react/shared_link_folder/utils",["require","exports"],function(e,n){"use strict";function t(e){return function(n){n.ctrlKey||n.metaKey||e(n)}}function r(e){var n=e._mount_access_perms;return null!=n&&!n.includes("can_view")}Object.defineProperty(n,"__esModule",{value:!0}),n.linkClickHandler=t,n.isNoAccessFolder=r}),define("modules/clean/react/shared_link_folder/view_toggle",["require","exports","external/classnames","external/react","modules/clean/react/sprite"],function(e,n,t,r,i){"use strict";function o(e){var n=e.icon,o=e.label,s=e.onClick;return r.createElement("button",{"aria-label":o,className:t({"sl-view-toggle-option":!0}),name:o,onClick:s,value:o},r.createElement(i.Sprite,{group:"web",name:n,alt:o}))}Object.defineProperty(n,"__esModule",{value:!0}),n.FolderViewToggleOption=o}),define("modules/clean/react/takedown_warning",["require","exports","tslib","external/react","external/react-dom-factories","external/prop-types","modules/clean/react_format","modules/constants/python","modules/core/i18n"],function(e,n,t,r,i,o,s,a,l){"use strict";var d=i.a,c=i.div;return(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n._getWarningMessage=function(){switch(n.props.type){case a.TakedownRequestTypes.DMCA:return s.reactFormat(l._("Certain files in this folder canâ€™t be shared due to a takedown request in accordance with the DMCA. <a>Learn more</a>"),{a:d({target:"_top",href:"/help/210"})});default:return s.reactFormat(l._("Certain files in this folder are unavailable. For more information <a>contact Dropbox support</a>."),{a:d({target:"_top",href:"/ticket"})})}},n}return t.__extends(n,e),n.prototype.render=function(){return c({className:"notify server-success"},this._getWarningMessage())},n.displayName="TakedownWarning",n.propTypes={type:o.number},n})(r.Component)});
//# sourceMappingURL=pkg-shared_link_folder.min.js-vflKSc1Ub.map