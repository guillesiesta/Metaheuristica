define(["require","exports","tslib","external/react","external/classnames","spectrum/button","modules/clean/abuse/report_flag","modules/clean/react/file_viewer/actions","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/more_dropdown","modules/clean/react/file_viewer/utils","modules/clean/react/size_class/constants","modules/clean/react/open_in_app/button","modules/clean/react/paper/open_in_paper_button","modules/clean/react/share_download/button","modules/clean/react/share_download/util","modules/clean/react/title_bar/controls_container","modules/clean/react/user_notifications/dropdown","modules/clean/sharing/api/client","modules/clean/sharing/delete_link_modal","modules/core/browser","modules/core/i18n","modules/clean/react/paper/utils"],function(e,n,t,r,o,i,a,s,l,u,c,p,d,m,h,f,k,_,v,w,P,g,L){"use strict";function y(e){return function(){return s.logUserAction(e,l.UserActionContext.TitleBarMain)}}function B(e){var n=e.isPrimaryButton,t=o({"sign-in-link":!0,control__button:!0});return r.createElement(i.Button,{className:t,variant:n?"primary":"secondary",href:c.getSharedLinkLoginUrl(),onClick:y(l.UserAction.SignIn)},g._("Sign in"))}Object.defineProperty(n,"__esModule",{value:!0});var C=(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={openInPaperButtonVariant:L.OpenInPaperButtonVariant.Off},n.removeShareLink=function(){var e=new v.ShareApiClient({userId:n.props.sharePermissions.canRemoveLinkUids[0]});return w.deleteLinkWithConfirmLegacy({client:e,contentName:n.props.file.filename,onCancel:null,onDeleteLink:function(){return P.redirect("/home")},tkey:n.getTkey()})},n.isDownloadAllowed=function(){return n.props.sharePermissions&&n.props.sharePermissions.canDownloadRoles.length>0},n}return t.__extends(n,e),n.prototype.componentDidMount=function(){this.setState({openInPaperButtonVariant:L.getOpenInPaperButtonVariant({file:this.props.file,user:this.props.user,sharedLink:this.props.sharedLinkInfo.url})})},n.prototype.getTkey=function(){return this.props.sharePermissions&&this.props.sharePermissions.canRemoveLinkUids.length>0?this.props.shareToken.linkKey:null},n.prototype.render=function(){var e=this.props,n=e.file,t=e.sharedLinkInfo,o=e.sharePermissions,i=e.shareToken,s=e.showOpenInAppButton,c=e.shouldDisplayActionButtons,v=e.sizeClass,w=e.user;if(v!==p.SizeClass.Large)return r.createElement(u.MoreDropdown,{allowRemoveLink:!!this.getTkey(),file:n,isPrivate:!1,onRemoveShareLink:this.removeShareLink,renderSignIn:!w,sizeClass:v,shareDownloadOptions:f.getDownloadOptions(o,t,i,n)});var P=this.isDownloadAllowed()&&this.state.openInPaperButtonVariant===L.OpenInPaperButtonVariant.Button?r.createElement(m.OpenInPaperButton,{file:n,user:w,sharedLink:t.url,hideCallout:!1}):null;return r.createElement(k.TitleBarControlsContainer,null,t.hasPublicAudienceOrVisibility!==!1?r.createElement(a.ReportFlag,{sharedLink:t.url}):null,s&&c?r.createElement(d.OpenInAppButton,{urls:this.props.file.open_in_app_data,userActionContext:l.UserActionContext.TitleBarMain}):null,w?null:r.createElement(B,{isPrimaryButton:!s}),c?P:null,i&&o&&c?r.createElement(h.ShareDownloadButton,{location:l.FileViewerPane.PreviewContent,fileOrFolder:n,sharedLinkInfo:t,sharePermissions:o,shareToken:i,user:w}):null,r.createElement(u.MoreDropdown,{allowRemoveLink:!!this.getTkey(),file:n,isPrivate:!1,onRemoveShareLink:this.removeShareLink,sizeClass:v}),w?r.createElement("div",{className:"react-title-bar__divider"}):null,w?r.createElement(_.UserNotificationsDropdown,{isPagelet:!1,onClick:y(l.UserAction.ClickNotifications)}):null)},n.defaultProps={user:null},n})(r.Component);n.SharedFileActions=C});
//# sourceMappingURL=shared_file_actions.min.js-vfl8LFTEW.map