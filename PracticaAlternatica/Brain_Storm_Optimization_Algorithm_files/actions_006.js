define(["require","exports","external/react","modules/clean/ajax","modules/clean/downloads","modules/clean/multiaccount_login","modules/clean/react/copy_to_dropbox/modal","modules/clean/react/modal","modules/clean/sharing/signup_modal_proxy","modules/clean/viewer","modules/core/browser","modules/core/exception","modules/core/i18n","modules/core/notify"],function(e,o,n,r,t,l,i,u,s,a,d,c,f,m){"use strict";return new((function(){function e(){}return e.prototype.direct=function(e){var o=function(){var o=function(){var o=function(){m.Notify.error(f._("Failed to download."))},n=e.downloadUrl,l=function(o){o===e.url?t.get({url:n,__do_not_use_expected_domain:"dl.dropboxusercontent.com"}):t.get({url:o})};r.SilentBackgroundRequest({url:"/sharing/fetch_user_content_link",data:{url:e.url},success:l,error:o})};if(!e.downloadTestUrl)return void o();var n=function(){m.Notify.error(f._("Failed to download zip file."))},l=function(e){"OK"===e?o():0===e.indexOf("err:")?m.Notify.error(f._("The zip file is too large.")):n()};r.SilentBackgroundRequest({url:e.downloadTestUrl,success:l,error:n})};return s.signupForDirectDownload().then(o)},e.prototype.toDropbox=function(e,o,r,t){var f,m;if("anonymous"===r)f=s.signup(),m=d.reload;else{var _=t?t.id:-1;c.assert(_!==-1,"role isn't anonymous => user cannot be null or undefined!"),f=new Promise(function(e){a.Viewer.get_viewer().is_user_signed_in(t)?e(_):l.show_modal({role:r,on_success:function(){e(_)}})})}f.then(function(t){var l=n.createElement(i.CopyToDropboxModal,{shareToken:e,fileOrFolder:o,userId:t,role:r,onDismiss:m});u.Modal.showInstance(l)})},e})())});
//# sourceMappingURL=actions.min.js-vfljCBY0c.map